root@ubuntu:~# cd /usr/local/src

root@ubuntu:/usr/local/src# wget https://releases.hashicorp.com/terraform/0.8.5/terraform_0.8.5_linux_386.zip
--2021-04-28 06:54:46--  https://releases.hashicorp.com/terraform/0.8.5/terraform_0.8.5_linux_386.zip
Resolving releases.hashicorp.com (releases.hashicorp.com)... 151.101.153.183, 2a04:4e42:24::439
Connecting to releases.hashicorp.com (releases.hashicorp.com)|151.101.153.183|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 20237140 (19M) [application/zip]
Saving to: ‘terraform_0.8.5_linux_386.zip’

100%[==============================================================================================================================>] 20,237,140   373KB/s   in 43s

2021-04-28 06:55:35 (457 KB/s) - ‘terraform_0.8.5_linux_386.zip’ saved [20237140/20237140]

root@ubuntu:/usr/local/src#

root@ubuntu:/usr/local/src# unzip terraform_0.8.5_linux_386.zip
Archive:  terraform_0.8.5_linux_386.zip
  inflating: terraform
root@ubuntu:/usr/local/src# ls -l
total 99032
-rwxrwxr-x 1 root root 81168992 Jan 26  2017 terraform
-rw-r--r-- 1 root root 20237140 Feb 15 15:50 terraform_0.8.5_linux_386.zip
root@ubuntu:/usr/local/src# mv terraform /usr/local/bin/
root@ubuntu:/usr/local/src# xport PATH=$PATH:/terraform-path/
-su: xport: command not found
root@ubuntu:/usr/local/src# export PATH=$PATH:/terraform-path/
root@ubuntu:/usr/local/src#

-------------------------------------------------------------------------------------

root@ubuntu:/usr/local/src# terraform version
Terraform v0.8.5


Your version of Terraform is out of date! The latest version
is 0.15.1. You can update by downloading from www.terraform.io


-------------------------------------------------------------------------------------

AKIAVYAMGJ3LNNXZJYQC                           ---- access key
/n3oZ5azZuiVYjzrb2S8dnhfPChismKjiSWHx3iQ       ---- secret key

-------------------------------------------------------------------------------------

root@ubuntu:/home/bitnami# mkdir manoj_terraform

vi aws.tf

provider "aws" {
access_key = "AKIAVYAMGJ3LNNXZJYQC"
secret_key = "/n3oZ5azZuiVYjzrb2S8dnhfPChismKjiSWHx3iQ"
region = "ap-south-1"
}

resource "aws_instance" "example" {
ami = "ami-0a9d27a9f4f5c0efc"
instance_type = "t2.micro"
tags {
Name = "Demo_server"
}
}

----------------------------------------------------------------------------------

root@ubuntu:/home/bitnami/manoj_terraform# cat providers.tf
provider "aws" {
access_key = "AKIAVYAMGJ3LNNXZJYQC"
secret_key = "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"
region = "ap-south-1"
}

root@ubuntu:/home/bitnami/manoj_terraform#


root@ubuntu:/home/bitnami/manoj_terraform# vi EC2.tf
root@ubuntu:/home/bitnami/manoj_terraform# cat EC2.tf
resource "aws_instance" "Demo_instance" {
ami = "ami-0a9d27a9f4f5c0efc"
instance_type = "t2.micro"
key_name = "test"
tags {
Name = "Demo_server"
}
}
root@ubuntu:/home/bitnami/manoj_terraform#

root@ubuntu:/home/bitnami/manoj_terraform# terraform plan
Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but
will not be persisted to local or remote state storage.


The Terraform execution plan has been generated and is shown below.
Resources are shown in alphabetical order for quick scanning. Green resources
will be created (or destroyed and then created if an existing resource
exists), yellow resources are being changed in-place, and red resources
will be destroyed. Cyan entries are data sources to be read.

Note: You didn't specify an "-out" parameter to save this plan, so when
"apply" is called, Terraform can't guarantee this is what will execute.

+ aws_instance.Demo_instance
    ami:                         "ami-0a9d27a9f4f5c0efc"
    associate_public_ip_address: "<computed>"
    availability_zone:           "<computed>"
    ebs_block_device.#:          "<computed>"
    ephemeral_block_device.#:    "<computed>"
    instance_state:              "<computed>"
    instance_type:               "t2.micro"
    key_name:                    "<computed>"
    network_interface_id:        "<computed>"
    placement_group:             "<computed>"
    private_dns:                 "<computed>"
    private_ip:                  "<computed>"
    public_dns:                  "<computed>"
    public_ip:                   "<computed>"
    root_block_device.#:         "<computed>"
    security_groups.#:           "<computed>"
    source_dest_check:           "true"
    subnet_id:                   "<computed>"
    tags.%:                      "1"
    tags.Name:                   "Demo_server"
    tenancy:                     "<computed>"
    vpc_security_group_ids.#:    "<computed>"


Plan: 1 to add, 0 to change, 0 to destroy.
root@ubuntu:/home/bitnami/manoj_terraform#

----------------------------------------------------------------------------------------------------
root@ubuntu:/home/bitnami/manoj_terraform# terraform apply
aws_instance.Demo_instance: Creating...
  ami:                         "" => "ami-0a9d27a9f4f5c0efc"
  associate_public_ip_address: "" => "<computed>"
  availability_zone:           "" => "<computed>"
  ebs_block_device.#:          "" => "<computed>"
  ephemeral_block_device.#:    "" => "<computed>"
  instance_state:              "" => "<computed>"
  instance_type:               "" => "t2.micro"
  key_name:                    "" => "<computed>"
  network_interface_id:        "" => "<computed>"
  placement_group:             "" => "<computed>"
  private_dns:                 "" => "<computed>"
  private_ip:                  "" => "<computed>"
  public_dns:                  "" => "<computed>"
  public_ip:                   "" => "<computed>"
  root_block_device.#:         "" => "<computed>"
  security_groups.#:           "" => "<computed>"
  source_dest_check:           "" => "true"
  subnet_id:                   "" => "<computed>"
  tags.%:                      "" => "1"
  tags.Name:                   "" => "Demo_server"
  tenancy:                     "" => "<computed>"
  vpc_security_group_ids.#:    "" => "<computed>"
aws_instance.Demo_instance: Still creating... (10s elapsed)
aws_instance.Demo_instance: Still creating... (20s elapsed)
aws_instance.Demo_instance: Still creating... (30s elapsed)
aws_instance.Demo_instance: Still creating... (40s elapsed)
aws_instance.Demo_instance: Still creating... (50s elapsed)
aws_instance.Demo_instance: Creation complete

Apply complete! Resources: 1 added, 0 changed, 0 destroyed.

The state of your infrastructure has been saved to the path
below. This state is required to modify and destroy your
infrastructure, so keep it safe. To inspect the complete state
use the `terraform show` command.

State path: terraform.tfstate
root@ubuntu:/home/bitnami/manoj_terraform#

------------------------------------------------------------------------------------------------------
root@ubuntu:/home/bitnami/manoj_terraform# vi vpc.tf
root@ubuntu:/home/bitnami/manoj_terraform# cat vpc.tf
# VPC
resource "aws_vpc" "My_VPC" {
  cidr_block           = "10.0.0.0/16"
  instance_tenancy     = "default"
  enable_dns_support   = "true"
  enable_dns_hostnames = "true"
tags = {
    Name = "Demo_VPC"
}

}
# Create Internet Gateway and attach to the VPC
resource "aws_internet_gateway" "My_igw" {
  vpc_id = aws_vpc.demo_igw.id
  tags = {
    Name = "demo_igw"
  }
}


---------------------------------------------------------------------------------------------------------------------------------------
                                                 Install Terraform in RHEL

yum install wget unzip

[root@ip-172-31-45-89 ec2-user]# cd ~
[root@ip-172-31-45-89 ~]# yum install wget unzip
Red Hat Update Infrastructure 3 Client Configuration Server 8                                                                            15 kB/s | 3.8 kB     00:00
Red Hat Enterprise Linux 8 for x86_64 - AppStream from RHUI (RPMs)                                                                       42 MB/s |  26 MB     00:00
Red Hat Enterprise Linux 8 for x86_64 - BaseOS from RHUI (RPMs)                                                                          46 MB/s |  29 MB     00:00
Last metadata expiration check: 0:00:01 ago on Sat 15 May 2021 07:42:07 PM UTC.
Dependencies resolved.
========================================================================================================================================================================
 Package                         Architecture                     Version                                    Repository                                            Size
========================================================================================================================================================================
Installing:
 unzip                           x86_64                           6.0-43.el8                                 rhel-8-baseos-rhui-rpms                              195 k
 wget                            x86_64                           1.19.5-10.el8                              rhel-8-appstream-rhui-rpms                           734 k

Transaction Summary
========================================================================================================================================================================
Install  2 Packages

Total download size: 929 k
Installed size: 3.2 M
Is this ok [y/N]: y
Downloading Packages:
(1/2): unzip-6.0-43.el8.x86_64.rpm                                                                                                      1.4 MB/s | 195 kB     00:00
(2/2): wget-1.19.5-10.el8.x86_64.rpm                                                                                                    5.1 MB/s | 734 kB     00:00
------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                                                   4.0 MB/s | 929 kB     00:00
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                                                                                                                1/1
  Installing       : unzip-6.0-43.el8.x86_64                                                                                                                        1/2
  Installing       : wget-1.19.5-10.el8.x86_64                                                                                                                      2/2
  Running scriptlet: wget-1.19.5-10.el8.x86_64                                                                                                                      2/2
  Verifying        : wget-1.19.5-10.el8.x86_64                                                                                                                      1/2
  Verifying        : unzip-6.0-43.el8.x86_64                                                                                                                        2/2

Installed:
  unzip-6.0-43.el8.x86_64                                                           wget-1.19.5-10.el8.x86_64

Complete!
[root@ip-172-31-45-89 ~]#

----------------------------

[root@ip-172-31-45-89 ~]# yum update
Last metadata expiration check: 0:02:05 ago on Sat 15 May 2021 07:42:07 PM UTC.
Dependencies resolved.
========================================================================================================================================================================
 Package                                          Architecture     Version                                                  Repository                             Size
========================================================================================================================================================================
Installing:
 kernel                                           x86_64           4.18.0-240.22.1.el8_3                                    rhel-8-baseos-rhui-rpms               4.4 M
 kernel-core                                      x86_64           4.18.0-240.22.1.el8_3                                    rhel-8-baseos-rhui-rpms                30 M
 kernel-modules                                   x86_64           4.18.0-240.22.1.el8_3                                    rhel-8-baseos-rhui-rpms                26 M
Upgrading:
 NetworkManager                                   x86_64           1:1.26.0-14.el8_3                                        rhel-8-baseos-rhui-rpms               2.4 M
 NetworkManager-libnm                             x86_64           1:1.26.0-14.el8_3                                        rhel-8-baseos-rhui-rpms               1.8 M
 NetworkManager-team                              x86_64           1:1.26.0-14.el8_3                                        rhel-8-baseos-rhui-rpms               142 k
 NetworkManager-tui                               x86_64           1:1.26.0-14.el8_3                                        rhel-8-baseos-rhui-rpms               320 k
 bind-export-libs                                 x86_64           32:9.11.20-5.el8_3.1                                     rhel-8-baseos-rhui-rpms               1.1 M
 cloud-init                                       noarch           19.4-11.el8_3.3                                          rhel-8-appstream-rhui-rpms            948 k
 crypto-policies                                  noarch           20210209-1.gitbfb6bed.el8_3                              rhel-8-baseos-rhui-rpms                62 k
 crypto-policies-scripts                          noarch           20210209-1.gitbfb6bed.el8_3                              rhel-8-baseos-rhui-rpms                67 k
 curl                                             x86_64           7.61.1-14.el8_3.1                                        rhel-8-baseos-rhui-rpms               353 k
 dbus                                             x86_64           1:1.12.8-12.el8_3                                        rhel-8-baseos-rhui-rpms                41 k
 dbus-common                                      noarch           1:1.12.8-12.el8_3                                        rhel-8-baseos-rhui-rpms                45 k
 dbus-daemon                                      x86_64           1:1.12.8-12.el8_3                                        rhel-8-baseos-rhui-rpms               240 k
 dbus-libs                                        x86_64           1:1.12.8-12.el8_3                                        rhel-8-baseos-rhui-rpms               183 k
 dbus-tools                                       x86_64           1:1.12.8-12.el8_3                                        rhel-8-baseos-rhui-rpms                85 k
 device-mapper                                    x86_64           8:1.02.171-5.el8_3.2                                     rhel-8-baseos-rhui-rpms               373 k
 device-mapper-libs                               x86_64           8:1.02.171-5.el8_3.2                                     rhel-8-baseos-rhui-rpms               406 k
 dnf-plugin-subscription-manager                  x86_64           1.27.18-1.el8_3                                          rhel-8-baseos-rhui-rpms               288 k
 dracut                                           x86_64           049-95.git20200804.el8_3.4                               rhel-8-baseos-rhui-rpms               368 k
 dracut-config-generic                            x86_64           049-95.git20200804.el8_3.4                               rhel-8-baseos-rhui-rpms                55 k
 dracut-config-rescue                             x86_64           049-95.git20200804.el8_3.4                               rhel-8-baseos-rhui-rpms                56 k
 dracut-network                                   x86_64           049-95.git20200804.el8_3.4                               rhel-8-baseos-rhui-rpms               103 k
 dracut-squash                                    x86_64           049-95.git20200804.el8_3.4                               rhel-8-baseos-rhui-rpms                57 k
 file                                             x86_64           5.33-16.el8_3.1                                          rhel-8-baseos-rhui-rpms                77 k
 file-libs                                        x86_64           5.33-16.el8_3.1                                          rhel-8-baseos-rhui-rpms               543 k
 freetype                                         x86_64           2.9.1-4.el8_3.1                                          rhel-8-baseos-rhui-rpms               394 k
 glibc                                            x86_64           2.28-127.el8_3.2                                         rhel-8-baseos-rhui-rpms               3.6 M
 glibc-common                                     x86_64           2.28-127.el8_3.2                                         rhel-8-baseos-rhui-rpms               1.3 M
 glibc-langpack-en                                x86_64           2.28-127.el8_3.2                                         rhel-8-baseos-rhui-rpms               824 k
 gnutls                                           x86_64           3.6.14-8.el8_3                                           rhel-8-baseos-rhui-rpms               1.0 M
 grub2-common                                     noarch           1:2.02-90.el8_3.1                                        rhel-8-baseos-rhui-rpms               885 k
 grub2-pc                                         x86_64           1:2.02-90.el8_3.1                                        rhel-8-baseos-rhui-rpms                39 k
 grub2-pc-modules                                 noarch           1:2.02-90.el8_3.1                                        rhel-8-baseos-rhui-rpms               868 k
 grub2-tools                                      x86_64           1:2.02-90.el8_3.1                                        rhel-8-baseos-rhui-rpms               2.0 M
 grub2-tools-extra                                x86_64           1:2.02-90.el8_3.1                                        rhel-8-baseos-rhui-rpms               1.1 M
 grub2-tools-minimal                              x86_64           1:2.02-90.el8_3.1                                        rhel-8-baseos-rhui-rpms               206 k
 insights-client                                  noarch           3.1.1-1.el8_3                                            rhel-8-appstream-rhui-rpms            1.0 M
 iptables-libs                                    x86_64           1.8.4-15.el8_3.3                                         rhel-8-baseos-rhui-rpms               106 k
 kernel-tools                                     x86_64           4.18.0-240.22.1.el8_3                                    rhel-8-baseos-rhui-rpms               4.5 M
 kernel-tools-libs                                x86_64           4.18.0-240.22.1.el8_3                                    rhel-8-baseos-rhui-rpms               4.4 M
 kexec-tools                                      x86_64           2.0.20-34.el8_3.2                                        rhel-8-baseos-rhui-rpms               497 k
 kmod                                             x86_64           25-16.el8_3.1                                            rhel-8-baseos-rhui-rpms               126 k
 kmod-libs                                        x86_64           25-16.el8_3.1                                            rhel-8-baseos-rhui-rpms                68 k
 libcurl                                          x86_64           7.61.1-14.el8_3.1                                        rhel-8-baseos-rhui-rpms               299 k
 libldb                                           x86_64           2.1.3-3.el8_3                                            rhel-8-baseos-rhui-rpms               179 k
 microcode_ctl                                    x86_64           4:20200609-2.20210216.1.el8_3                            rhel-8-baseos-rhui-rpms               4.6 M
 nettle                                           x86_64           3.4.1-4.el8_3                                            rhel-8-baseos-rhui-rpms               301 k
 openssl                                          x86_64           1:1.1.1g-15.el8_3                                        rhel-8-baseos-rhui-rpms               707 k
 openssl-libs                                     x86_64           1:1.1.1g-15.el8_3                                        rhel-8-baseos-rhui-rpms               1.5 M
 procps-ng                                        x86_64           3.3.15-3.el8_3.1                                         rhel-8-baseos-rhui-rpms               328 k
 python3-magic                                    noarch           5.33-16.el8_3.1                                          rhel-8-baseos-rhui-rpms                46 k
 python3-perf                                     x86_64           4.18.0-240.22.1.el8_3                                    rhel-8-baseos-rhui-rpms               4.5 M
 python3-subscription-manager-rhsm                x86_64           1.27.18-1.el8_3                                          rhel-8-baseos-rhui-rpms               362 k
 python3-syspurpose                               x86_64           1.27.18-1.el8_3                                          rhel-8-baseos-rhui-rpms               299 k
 qemu-guest-agent                                 x86_64           15:4.2.0-34.module+el8.3.0+10437+1ca0c2ba.5              rhel-8-appstream-rhui-rpms            233 k
 rh-amazon-rhui-client                            noarch           3.0.40-1.el8                                             rhui-client-config-server-8            37 k
 selinux-policy                                   noarch           3.14.3-54.el8_3.4                                        rhel-8-baseos-rhui-rpms               622 k
 selinux-policy-targeted                          noarch           3.14.3-54.el8_3.4                                        rhel-8-baseos-rhui-rpms                15 M
 subscription-manager                             x86_64           1.27.18-1.el8_3                                          rhel-8-baseos-rhui-rpms               1.1 M
 subscription-manager-rhsm-certificates           x86_64           1.27.18-1.el8_3                                          rhel-8-baseos-rhui-rpms               262 k
 sudo                                             x86_64           1.8.29-6.el8_3.1                                         rhel-8-baseos-rhui-rpms               924 k
 systemd                                          x86_64           239-41.el8_3.2                                           rhel-8-baseos-rhui-rpms               3.5 M
 systemd-libs                                     x86_64           239-41.el8_3.2                                           rhel-8-baseos-rhui-rpms               1.1 M
 systemd-pam                                      x86_64           239-41.el8_3.2                                           rhel-8-baseos-rhui-rpms               456 k
 systemd-udev                                     x86_64           239-41.el8_3.2                                           rhel-8-baseos-rhui-rpms               1.3 M
 tuned                                            noarch           2.14.0-3.el8_3.2                                         rhel-8-baseos-rhui-rpms               293 k
 tzdata                                           noarch           2021a-1.el8                                              rhel-8-baseos-rhui-rpms               473 k
 zlib                                             x86_64           1.2.11-16.2.el8_3                                        rhel-8-baseos-rhui-rpms               102 k
Installing dependencies:
 grub2-tools-efi                                  x86_64           1:2.02-90.el8_3.1                                        rhel-8-baseos-rhui-rpms               471 k
 linux-firmware                                   noarch           20200619-101.git3890db36.el8_3                           rhel-8-baseos-rhui-rpms               101 M

Transaction Summary
========================================================================================================================================================================
Install   5 Packages
Upgrade  67 Packages

Total download size: 233 M
Is this ok [y/N]: y
Downloading Packages:
(1/72): grub2-tools-efi-2.02-90.el8_3.1.x86_64.rpm                                                                                      2.9 MB/s | 471 kB     00:00
(2/72): kernel-4.18.0-240.22.1.el8_3.x86_64.rpm                                                                                          14 MB/s | 4.4 MB     00:00
(3/72): kernel-modules-4.18.0-240.22.1.el8_3.x86_64.rpm                                                                                  30 MB/s |  26 MB     00:00
(4/72): kernel-core-4.18.0-240.22.1.el8_3.x86_64.rpm                                                                                     26 MB/s |  30 MB     00:01
(5/72): rh-amazon-rhui-client-3.0.40-1.el8.noarch.rpm                                                                                   231 kB/s |  37 kB     00:00
(6/72): qemu-guest-agent-4.2.0-34.module+el8.3.0+10437+1ca0c2ba.5.x86_64.rpm                                                            2.0 MB/s | 233 kB     00:00
(7/72): insights-client-3.1.1-1.el8_3.noarch.rpm                                                                                        7.5 MB/s | 1.0 MB     00:00
(8/72): cloud-init-19.4-11.el8_3.3.noarch.rpm                                                                                           7.6 MB/s | 948 kB     00:00
(9/72): freetype-2.9.1-4.el8_3.1.x86_64.rpm                                                                                             3.4 MB/s | 394 kB     00:00
(10/72): libcurl-7.61.1-14.el8_3.1.x86_64.rpm                                                                                           2.5 MB/s | 299 kB     00:00
(11/72): iptables-libs-1.8.4-15.el8_3.3.x86_64.rpm                                                                                      973 kB/s | 106 kB     00:00
(12/72): curl-7.61.1-14.el8_3.1.x86_64.rpm                                                                                              2.8 MB/s | 353 kB     00:00
(13/72): sudo-1.8.29-6.el8_3.1.x86_64.rpm                                                                                               6.9 MB/s | 924 kB     00:00
(14/72): device-mapper-libs-1.02.171-5.el8_3.2.x86_64.rpm                                                                               3.7 MB/s | 406 kB     00:00
(15/72): tzdata-2021a-1.el8.noarch.rpm                                                                                                  3.8 MB/s | 473 kB     00:00
(16/72): linux-firmware-20200619-101.git3890db36.el8_3.noarch.rpm                                                                        42 MB/s | 101 MB     00:02
(17/72): python3-syspurpose-1.27.18-1.el8_3.x86_64.rpm                                                                                  597 kB/s | 299 kB     00:00
(18/72): device-mapper-1.02.171-5.el8_3.2.x86_64.rpm                                                                                    732 kB/s | 373 kB     00:00
(19/72): python3-subscription-manager-rhsm-1.27.18-1.el8_3.x86_64.rpm                                                                   3.5 MB/s | 362 kB     00:00
(20/72): subscription-manager-rhsm-certificates-1.27.18-1.el8_3.x86_64.rpm                                                              2.4 MB/s | 262 kB     00:00
(21/72): subscription-manager-1.27.18-1.el8_3.x86_64.rpm                                                                                9.3 MB/s | 1.1 MB     00:00
(22/72): kexec-tools-2.0.20-34.el8_3.2.x86_64.rpm                                                                                       4.6 MB/s | 497 kB     00:00
(23/72): dbus-common-1.12.8-12.el8_3.noarch.rpm                                                                                         506 kB/s |  45 kB     00:00
(24/72): dracut-config-rescue-049-95.git20200804.el8_3.4.x86_64.rpm                                                                     568 kB/s |  56 kB     00:00
(25/72): dbus-tools-1.12.8-12.el8_3.x86_64.rpm                                                                                          892 kB/s |  85 kB     00:00
(26/72): dracut-network-049-95.git20200804.el8_3.4.x86_64.rpm                                                                           1.1 MB/s | 103 kB     00:00
(27/72): glibc-common-2.28-127.el8_3.2.x86_64.rpm                                                                                        11 MB/s | 1.3 MB     00:00
(28/72): dbus-daemon-1.12.8-12.el8_3.x86_64.rpm                                                                                         2.5 MB/s | 240 kB     00:00
(29/72): tuned-2.14.0-3.el8_3.2.noarch.rpm                                                                                              2.6 MB/s | 293 kB     00:00
(30/72): dracut-049-95.git20200804.el8_3.4.x86_64.rpm                                                                                   3.7 MB/s | 368 kB     00:00
(31/72): dracut-squash-049-95.git20200804.el8_3.4.x86_64.rpm                                                                            598 kB/s |  57 kB     00:00
(32/72): glibc-langpack-en-2.28-127.el8_3.2.x86_64.rpm                                                                                  7.0 MB/s | 824 kB     00:00
(33/72): kmod-libs-25-16.el8_3.1.x86_64.rpm                                                                                             758 kB/s |  68 kB     00:00
(34/72): dbus-1.12.8-12.el8_3.x86_64.rpm                                                                                                450 kB/s |  41 kB     00:00
(35/72): glibc-2.28-127.el8_3.2.x86_64.rpm                                                                                               25 MB/s | 3.6 MB     00:00
(36/72): dnf-plugin-subscription-manager-1.27.18-1.el8_3.x86_64.rpm                                                                     2.5 MB/s | 288 kB     00:00
(37/72): kmod-25-16.el8_3.1.x86_64.rpm                                                                                                  1.1 MB/s | 126 kB     00:00
(38/72): dbus-libs-1.12.8-12.el8_3.x86_64.rpm                                                                                           1.9 MB/s | 183 kB     00:00
(39/72): dracut-config-generic-049-95.git20200804.el8_3.4.x86_64.rpm                                                                    551 kB/s |  55 kB     00:00
(40/72): grub2-tools-minimal-2.02-90.el8_3.1.x86_64.rpm                                                                                 1.3 MB/s | 206 kB     00:00
(41/72): bind-export-libs-9.11.20-5.el8_3.1.x86_64.rpm                                                                                  6.2 MB/s | 1.1 MB     00:00
(42/72): microcode_ctl-20200609-2.20210216.1.el8_3.x86_64.rpm                                                                            18 MB/s | 4.6 MB     00:00
(43/72): grub2-pc-2.02-90.el8_3.1.x86_64.rpm                                                                                            398 kB/s |  39 kB     00:00
(44/72): grub2-tools-extra-2.02-90.el8_3.1.x86_64.rpm                                                                                   8.4 MB/s | 1.1 MB     00:00
(45/72): grub2-common-2.02-90.el8_3.1.noarch.rpm                                                                                        8.1 MB/s | 885 kB     00:00
(46/72): grub2-pc-modules-2.02-90.el8_3.1.noarch.rpm                                                                                    7.2 MB/s | 868 kB     00:00
(47/72): grub2-tools-2.02-90.el8_3.1.x86_64.rpm                                                                                          14 MB/s | 2.0 MB     00:00
(48/72): openssl-1.1.1g-15.el8_3.x86_64.rpm                                                                                             6.7 MB/s | 707 kB     00:00
(49/72): openssl-libs-1.1.1g-15.el8_3.x86_64.rpm                                                                                         11 MB/s | 1.5 MB     00:00
(50/72): systemd-libs-239-41.el8_3.2.x86_64.rpm                                                                                         8.4 MB/s | 1.1 MB     00:00
(51/72): file-libs-5.33-16.el8_3.1.x86_64.rpm                                                                                           5.0 MB/s | 543 kB     00:00
(52/72): systemd-pam-239-41.el8_3.2.x86_64.rpm                                                                                          4.3 MB/s | 456 kB     00:00
(53/72): NetworkManager-tui-1.26.0-14.el8_3.x86_64.rpm                                                                                  3.0 MB/s | 320 kB     00:00
(54/72): NetworkManager-team-1.26.0-14.el8_3.x86_64.rpm                                                                                 1.4 MB/s | 142 kB     00:00
(55/72): crypto-policies-scripts-20210209-1.gitbfb6bed.el8_3.noarch.rpm                                                                 695 kB/s |  67 kB     00:00
(56/72): kernel-tools-4.18.0-240.22.1.el8_3.x86_64.rpm                                                                                   24 MB/s | 4.5 MB     00:00
(57/72): systemd-239-41.el8_3.2.x86_64.rpm                                                                                               18 MB/s | 3.5 MB     00:00
(58/72): python3-perf-4.18.0-240.22.1.el8_3.x86_64.rpm                                                                                   25 MB/s | 4.5 MB     00:00
(59/72): zlib-1.2.11-16.2.el8_3.x86_64.rpm                                                                                              901 kB/s | 102 kB     00:00
(60/72): NetworkManager-libnm-1.26.0-14.el8_3.x86_64.rpm                                                                                 14 MB/s | 1.8 MB     00:00
(61/72): file-5.33-16.el8_3.1.x86_64.rpm                                                                                                781 kB/s |  77 kB     00:00
(62/72): systemd-udev-239-41.el8_3.2.x86_64.rpm                                                                                          11 MB/s | 1.3 MB     00:00
(63/72): crypto-policies-20210209-1.gitbfb6bed.el8_3.noarch.rpm                                                                         693 kB/s |  62 kB     00:00
(64/72): python3-magic-5.33-16.el8_3.1.noarch.rpm                                                                                       470 kB/s |  46 kB     00:00
(65/72): kernel-tools-libs-4.18.0-240.22.1.el8_3.x86_64.rpm                                                                              24 MB/s | 4.4 MB     00:00
(66/72): NetworkManager-1.26.0-14.el8_3.x86_64.rpm                                                                                       15 MB/s | 2.4 MB     00:00
(67/72): libldb-2.1.3-3.el8_3.x86_64.rpm                                                                                                1.9 MB/s | 179 kB     00:00
(68/72): nettle-3.4.1-4.el8_3.x86_64.rpm                                                                                                2.9 MB/s | 301 kB     00:00
(69/72): gnutls-3.6.14-8.el8_3.x86_64.rpm                                                                                               8.2 MB/s | 1.0 MB     00:00
(70/72): procps-ng-3.3.15-3.el8_3.1.x86_64.rpm                                                                                          3.5 MB/s | 328 kB     00:00
(71/72): selinux-policy-3.14.3-54.el8_3.4.noarch.rpm                                                                                    4.6 MB/s | 622 kB     00:00
(72/72): selinux-policy-targeted-3.14.3-54.el8_3.4.noarch.rpm                                                                            48 MB/s |  15 MB     00:00
------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Total                                                                                                                                    48 MB/s | 233 MB     00:04
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                                                                                                                1/1
  Running scriptlet: grub2-common-1:2.02-90.el8_3.1.noarch                                                                                                          1/1
  Upgrading        : grub2-common-1:2.02-90.el8_3.1.noarch                                                                                                        1/139
  Upgrading        : python3-syspurpose-1.27.18-1.el8_3.x86_64                                                                                                    2/139
  Upgrading        : grub2-pc-modules-1:2.02-90.el8_3.1.noarch                                                                                                    3/139
  Upgrading        : crypto-policies-20210209-1.gitbfb6bed.el8_3.noarch                                                                                           4/139
  Running scriptlet: crypto-policies-20210209-1.gitbfb6bed.el8_3.noarch                                                                                           4/139
  Upgrading        : crypto-policies-scripts-20210209-1.gitbfb6bed.el8_3.noarch                                                                                   5/139
  Upgrading        : selinux-policy-3.14.3-54.el8_3.4.noarch                                                                                                      6/139
  Running scriptlet: selinux-policy-3.14.3-54.el8_3.4.noarch                                                                                                      6/139
  Upgrading        : dbus-common-1:1.12.8-12.el8_3.noarch                                                                                                         7/139
  Upgrading        : subscription-manager-rhsm-certificates-1.27.18-1.el8_3.x86_64                                                                                8/139
  Upgrading        : tzdata-2021a-1.el8.noarch                                                                                                                    9/139
  Upgrading        : glibc-langpack-en-2.28-127.el8_3.2.x86_64                                                                                                   10/139
  Running scriptlet: glibc-2.28-127.el8_3.2.x86_64                                                                                                               11/139
  Upgrading        : glibc-2.28-127.el8_3.2.x86_64                                                                                                               11/139
  Running scriptlet: glibc-2.28-127.el8_3.2.x86_64                                                                                                               11/139
  Upgrading        : glibc-common-2.28-127.el8_3.2.x86_64                                                                                                        12/139
  Upgrading        : zlib-1.2.11-16.2.el8_3.x86_64                                                                                                               13/139
  Upgrading        : systemd-libs-239-41.el8_3.2.x86_64                                                                                                          14/139
  Running scriptlet: systemd-libs-239-41.el8_3.2.x86_64                                                                                                          14/139
  Upgrading        : openssl-libs-1:1.1.1g-15.el8_3.x86_64                                                                                                       15/139
  Running scriptlet: openssl-libs-1:1.1.1g-15.el8_3.x86_64                                                                                                       15/139
  Upgrading        : kmod-libs-25-16.el8_3.1.x86_64                                                                                                              16/139
  Running scriptlet: kmod-libs-25-16.el8_3.1.x86_64                                                                                                              16/139
  Upgrading        : libcurl-7.61.1-14.el8_3.1.x86_64                                                                                                            17/139
  Upgrading        : kmod-25-16.el8_3.1.x86_64                                                                                                                   18/139
  Upgrading        : dbus-libs-1:1.12.8-12.el8_3.x86_64                                                                                                          19/139
  Running scriptlet: dbus-libs-1:1.12.8-12.el8_3.x86_64                                                                                                          19/139
  Upgrading        : procps-ng-3.3.15-3.el8_3.1.x86_64                                                                                                           20/139
  Upgrading        : dbus-tools-1:1.12.8-12.el8_3.x86_64                                                                                                         21/139
  Running scriptlet: dbus-daemon-1:1.12.8-12.el8_3.x86_64                                                                                                        22/139
  Upgrading        : dbus-daemon-1:1.12.8-12.el8_3.x86_64                                                                                                        22/139
  Running scriptlet: dbus-daemon-1:1.12.8-12.el8_3.x86_64                                                                                                        22/139
  Upgrading        : python3-subscription-manager-rhsm-1.27.18-1.el8_3.x86_64                                                                                    23/139
  Upgrading        : dnf-plugin-subscription-manager-1.27.18-1.el8_3.x86_64                                                                                      24/139
  Upgrading        : freetype-2.9.1-4.el8_3.1.x86_64                                                                                                             25/139
  Upgrading        : file-libs-5.33-16.el8_3.1.x86_64                                                                                                            26/139
  Upgrading        : file-5.33-16.el8_3.1.x86_64                                                                                                                 27/139
  Upgrading        : python3-magic-5.33-16.el8_3.1.noarch                                                                                                        28/139
  Upgrading        : iptables-libs-1.8.4-15.el8_3.3.x86_64                                                                                                       29/139
  Upgrading        : python3-perf-4.18.0-240.22.1.el8_3.x86_64                                                                                                   30/139
  Upgrading        : kernel-tools-libs-4.18.0-240.22.1.el8_3.x86_64                                                                                              31/139
  Running scriptlet: kernel-tools-libs-4.18.0-240.22.1.el8_3.x86_64                                                                                              31/139
  Upgrading        : kernel-tools-4.18.0-240.22.1.el8_3.x86_64                                                                                                   32/139
  Upgrading        : nettle-3.4.1-4.el8_3.x86_64                                                                                                                 33/139
  Running scriptlet: nettle-3.4.1-4.el8_3.x86_64                                                                                                                 33/139
  Upgrading        : gnutls-3.6.14-8.el8_3.x86_64                                                                                                                34/139
  Upgrading        : systemd-pam-239-41.el8_3.2.x86_64                                                                                                           35/139
  Running scriptlet: systemd-239-41.el8_3.2.x86_64                                                                                                               36/139
  Upgrading        : systemd-239-41.el8_3.2.x86_64                                                                                                               36/139
  Running scriptlet: systemd-239-41.el8_3.2.x86_64                                                                                                               36/139
  Upgrading        : dbus-1:1.12.8-12.el8_3.x86_64                                                                                                               37/139
  Upgrading        : systemd-udev-239-41.el8_3.2.x86_64                                                                                                          38/139
  Running scriptlet: systemd-udev-239-41.el8_3.2.x86_64                                                                                                          38/139
  Upgrading        : dracut-049-95.git20200804.el8_3.4.x86_64                                                                                                    39/139
  Upgrading        : NetworkManager-libnm-1:1.26.0-14.el8_3.x86_64                                                                                               40/139
  Running scriptlet: NetworkManager-libnm-1:1.26.0-14.el8_3.x86_64                                                                                               40/139
  Running scriptlet: NetworkManager-1:1.26.0-14.el8_3.x86_64                                                                                                     41/139
  Upgrading        : NetworkManager-1:1.26.0-14.el8_3.x86_64                                                                                                     41/139
  Running scriptlet: NetworkManager-1:1.26.0-14.el8_3.x86_64                                                                                                     41/139
  Upgrading        : dracut-network-049-95.git20200804.el8_3.4.x86_64                                                                                            42/139
  Upgrading        : dracut-squash-049-95.git20200804.el8_3.4.x86_64                                                                                             43/139
  Upgrading        : device-mapper-libs-8:1.02.171-5.el8_3.2.x86_64                                                                                              44/139
  Upgrading        : device-mapper-8:1.02.171-5.el8_3.2.x86_64                                                                                                   45/139
  Upgrading        : grub2-tools-minimal-1:2.02-90.el8_3.1.x86_64                                                                                                46/139
  Upgrading        : grub2-tools-extra-1:2.02-90.el8_3.1.x86_64                                                                                                  47/139
  Running scriptlet: grub2-tools-1:2.02-90.el8_3.1.x86_64                                                                                                        48/139
  Upgrading        : grub2-tools-1:2.02-90.el8_3.1.x86_64                                                                                                        48/139
  Running scriptlet: grub2-tools-1:2.02-90.el8_3.1.x86_64                                                                                                        48/139
  Installing       : linux-firmware-20200619-101.git3890db36.el8_3.noarch                                                                                        49/139
  Installing       : kernel-core-4.18.0-240.22.1.el8_3.x86_64                                                                                                    50/139
  Running scriptlet: kernel-core-4.18.0-240.22.1.el8_3.x86_64                                                                                                    50/139
  Installing       : kernel-modules-4.18.0-240.22.1.el8_3.x86_64                                                                                                 51/139
  Running scriptlet: kernel-modules-4.18.0-240.22.1.el8_3.x86_64                                                                                                 51/139
  Installing       : kernel-4.18.0-240.22.1.el8_3.x86_64                                                                                                         52/139
  Upgrading        : grub2-pc-1:2.02-90.el8_3.1.x86_64                                                                                                           53/139
  Installing       : grub2-tools-efi-1:2.02-90.el8_3.1.x86_64                                                                                                    54/139
  Upgrading        : kexec-tools-2.0.20-34.el8_3.2.x86_64                                                                                                        55/139
  Running scriptlet: kexec-tools-2.0.20-34.el8_3.2.x86_64                                                                                                        55/139
  Upgrading        : NetworkManager-tui-1:1.26.0-14.el8_3.x86_64                                                                                                 56/139
  Upgrading        : NetworkManager-team-1:1.26.0-14.el8_3.x86_64                                                                                                57/139
  Upgrading        : dracut-config-rescue-049-95.git20200804.el8_3.4.x86_64                                                                                      58/139
  Upgrading        : dracut-config-generic-049-95.git20200804.el8_3.4.x86_64                                                                                     59/139
  Upgrading        : tuned-2.14.0-3.el8_3.2.noarch                                                                                                               60/139
  Running scriptlet: tuned-2.14.0-3.el8_3.2.noarch                                                                                                               60/139
  Upgrading        : insights-client-3.1.1-1.el8_3.noarch                                                                                                        61/139
  Running scriptlet: insights-client-3.1.1-1.el8_3.noarch                                                                                                        61/139
  Upgrading        : qemu-guest-agent-15:4.2.0-34.module+el8.3.0+10437+1ca0c2ba.5.x86_64                                                                         62/139
  Upgrading        : cloud-init-19.4-11.el8_3.3.noarch                                                                                                           63/139
  Running scriptlet: cloud-init-19.4-11.el8_3.3.noarch                                                                                                           63/139
  Upgrading        : subscription-manager-1.27.18-1.el8_3.x86_64                                                                                                 64/139
  Running scriptlet: subscription-manager-1.27.18-1.el8_3.x86_64                                                                                                 64/139
  Upgrading        : microcode_ctl-4:20200609-2.20210216.1.el8_3.x86_64                                                                                          65/139
  Running scriptlet: microcode_ctl-4:20200609-2.20210216.1.el8_3.x86_64                                                                                          65/139
  Upgrading        : curl-7.61.1-14.el8_3.1.x86_64                                                                                                               66/139
  Upgrading        : bind-export-libs-32:9.11.20-5.el8_3.1.x86_64                                                                                                67/139
  Running scriptlet: bind-export-libs-32:9.11.20-5.el8_3.1.x86_64                                                                                                67/139
  Upgrading        : openssl-1:1.1.1g-15.el8_3.x86_64                                                                                                            68/139
  Upgrading        : sudo-1.8.29-6.el8_3.1.x86_64                                                                                                                69/139
  Running scriptlet: sudo-1.8.29-6.el8_3.1.x86_64                                                                                                                69/139
  Upgrading        : libldb-2.1.3-3.el8_3.x86_64                                                                                                                 70/139
  Running scriptlet: selinux-policy-targeted-3.14.3-54.el8_3.4.noarch                                                                                            71/139
  Upgrading        : selinux-policy-targeted-3.14.3-54.el8_3.4.noarch                                                                                            71/139
  Running scriptlet: selinux-policy-targeted-3.14.3-54.el8_3.4.noarch                                                                                            71/139
  Upgrading        : rh-amazon-rhui-client-3.0.40-1.el8.noarch                                                                                                   72/139
  Running scriptlet: rh-amazon-rhui-client-3.0.40-1.el8.noarch                                                                                                   72/139
[INFO:choose_repo] choose_repo:36 2021-05-15 19:46:05,244: Enabling binary repos in redhat-rhui.repo
[INFO:choose_repo] choose_repo:58 2021-05-15 19:46:05,245: Enabling client config repo
[INFO:choose_repo] choose_repo:66 2021-05-15 19:46:05,245: Executing [sed -i 's/enabled=0/enabled=1/' /etc/yum.repos.d/redhat-rhui-client-config.repo]

  Cleanup          : grub2-pc-1:2.02-90.el8.x86_64                                                                                                               73/139
  Running scriptlet: tuned-2.14.0-3.el8.noarch                                                                                                                   74/139
  Cleanup          : tuned-2.14.0-3.el8.noarch                                                                                                                   74/139
  Running scriptlet: tuned-2.14.0-3.el8.noarch                                                                                                                   74/139
  Running scriptlet: cloud-init-19.4-11.el8.noarch                                                                                                               75/139
  Cleanup          : cloud-init-19.4-11.el8.noarch                                                                                                               75/139
  Running scriptlet: cloud-init-19.4-11.el8.noarch                                                                                                               75/139
  Running scriptlet: insights-client-3.1.0-3.el8.noarch                                                                                                          76/139
  Cleanup          : insights-client-3.1.0-3.el8.noarch                                                                                                          76/139
  Running scriptlet: insights-client-3.1.0-3.el8.noarch                                                                                                          76/139
  Running scriptlet: microcode_ctl-4:20200609-2.el8.x86_64                                                                                                       77/139
  Cleanup          : microcode_ctl-4:20200609-2.el8.x86_64                                                                                                       77/139
  Running scriptlet: microcode_ctl-4:20200609-2.el8.x86_64                                                                                                       77/139
  Cleanup          : selinux-policy-targeted-3.14.3-54.el8.noarch                                                                                                78/139
  Running scriptlet: selinux-policy-targeted-3.14.3-54.el8.noarch                                                                                                78/139
  Cleanup          : python3-magic-5.33-16.el8.noarch                                                                                                            79/139
  Cleanup          : grub2-pc-modules-1:2.02-90.el8.noarch                                                                                                       80/139
  Cleanup          : crypto-policies-scripts-20200713-1.git51d1222.el8.noarch                                                                                    81/139
  Cleanup          : dracut-config-generic-049-95.git20200804.el8.x86_64                                                                                         82/139
  Cleanup          : dracut-config-rescue-049-95.git20200804.el8.x86_64                                                                                          83/139
  Cleanup          : selinux-policy-3.14.3-54.el8.noarch                                                                                                         84/139
  Running scriptlet: selinux-policy-3.14.3-54.el8.noarch                                                                                                         84/139
  Running scriptlet: rh-amazon-rhui-client-3.0.32-1.el8.noarch                                                                                                   85/139
  Cleanup          : rh-amazon-rhui-client-3.0.32-1.el8.noarch                                                                                                   85/139
  Cleanup          : NetworkManager-tui-1:1.26.0-9.el8_3.x86_64                                                                                                  86/139
  Cleanup          : systemd-pam-239-41.el8_3.x86_64                                                                                                             87/139
  Running scriptlet: kexec-tools-2.0.20-34.el8.x86_64                                                                                                            88/139
  Cleanup          : kexec-tools-2.0.20-34.el8.x86_64                                                                                                            88/139
  Running scriptlet: kexec-tools-2.0.20-34.el8.x86_64                                                                                                            88/139
  Cleanup          : sudo-1.8.29-6.el8.x86_64                                                                                                                    89/139
  Cleanup          : qemu-guest-agent-15:4.2.0-34.module+el8.3.0+7976+077be4ec.x86_64                                                                            90/139
  Cleanup          : openssl-1:1.1.1g-11.el8.x86_64                                                                                                              91/139
  Cleanup          : kernel-tools-4.18.0-240.1.1.el8_3.x86_64                                                                                                    92/139
  Cleanup          : curl-7.61.1-14.el8.x86_64                                                                                                                   93/139
  Cleanup          : bind-export-libs-32:9.11.20-5.el8.x86_64                                                                                                    94/139
  Running scriptlet: bind-export-libs-32:9.11.20-5.el8.x86_64                                                                                                    94/139
  Cleanup          : python3-perf-4.18.0-240.1.1.el8_3.x86_64                                                                                                    95/139
  Running scriptlet: grub2-tools-1:2.02-90.el8.x86_64                                                                                                            96/139
  Cleanup          : grub2-tools-1:2.02-90.el8.x86_64                                                                                                            96/139
  Cleanup          : grub2-tools-extra-1:2.02-90.el8.x86_64                                                                                                      97/139
  Running scriptlet: subscription-manager-1.27.16-1.el8.x86_64                                                                                                   98/139
  Cleanup          : subscription-manager-1.27.16-1.el8.x86_64                                                                                                   98/139
  Running scriptlet: subscription-manager-1.27.16-1.el8.x86_64                                                                                                   98/139
  Cleanup          : python3-subscription-manager-rhsm-1.27.16-1.el8.x86_64                                                                                      99/139
  Cleanup          : grub2-tools-minimal-1:2.02-90.el8.x86_64                                                                                                   100/139
  Cleanup          : device-mapper-libs-8:1.02.171-5.el8.x86_64                                                                                                 101/139
  Cleanup          : device-mapper-8:1.02.171-5.el8.x86_64                                                                                                      102/139
  Cleanup          : libldb-2.1.3-2.el8.x86_64                                                                                                                  103/139
  Cleanup          : file-5.33-16.el8.x86_64                                                                                                                    104/139
  Cleanup          : file-libs-5.33-16.el8.x86_64                                                                                                               105/139
  Cleanup          : freetype-2.9.1-4.el8.x86_64                                                                                                                106/139
  Cleanup          : dnf-plugin-subscription-manager-1.27.16-1.el8.x86_64                                                                                       107/139
  Cleanup          : NetworkManager-team-1:1.26.0-9.el8_3.x86_64                                                                                                108/139
  Cleanup          : dracut-network-049-95.git20200804.el8.x86_64                                                                                               109/139
  Cleanup          : dracut-squash-049-95.git20200804.el8.x86_64                                                                                                110/139
  Running scriptlet: NetworkManager-1:1.26.0-9.el8_3.x86_64                                                                                                     111/139
  Cleanup          : NetworkManager-1:1.26.0-9.el8_3.x86_64                                                                                                     111/139
  Running scriptlet: NetworkManager-1:1.26.0-9.el8_3.x86_64                                                                                                     111/139
  Cleanup          : NetworkManager-libnm-1:1.26.0-9.el8_3.x86_64                                                                                               112/139
  Running scriptlet: NetworkManager-libnm-1:1.26.0-9.el8_3.x86_64                                                                                               112/139
  Cleanup          : libcurl-7.61.1-14.el8.x86_64                                                                                                               113/139
  Cleanup          : dracut-049-95.git20200804.el8.x86_64                                                                                                       114/139
  Cleanup          : systemd-udev-239-41.el8_3.x86_64                                                                                                           115/139
  Running scriptlet: systemd-udev-239-41.el8_3.x86_64                                                                                                           115/139
  Cleanup          : dbus-1:1.12.8-11.el8.x86_64                                                                                                                116/139
  Running scriptlet: systemd-239-41.el8_3.x86_64                                                                                                                117/139
  Cleanup          : systemd-239-41.el8_3.x86_64                                                                                                                117/139
  Cleanup          : gnutls-3.6.14-6.el8.x86_64                                                                                                                 118/139
  Running scriptlet: dbus-daemon-1:1.12.8-11.el8.x86_64                                                                                                         119/139
  Cleanup          : dbus-daemon-1:1.12.8-11.el8.x86_64                                                                                                         119/139
  Running scriptlet: dbus-daemon-1:1.12.8-11.el8.x86_64                                                                                                         119/139
  Cleanup          : procps-ng-3.3.15-3.el8.x86_64                                                                                                              120/139
  Cleanup          : kmod-libs-25-16.el8.x86_64                                                                                                                 121/139
  Running scriptlet: kmod-libs-25-16.el8.x86_64                                                                                                                 121/139
  Cleanup          : dbus-tools-1:1.12.8-11.el8.x86_64                                                                                                          122/139
  Cleanup          : dbus-libs-1:1.12.8-11.el8.x86_64                                                                                                           123/139
  Running scriptlet: dbus-libs-1:1.12.8-11.el8.x86_64                                                                                                           123/139
  Cleanup          : systemd-libs-239-41.el8_3.x86_64                                                                                                           124/139
  Cleanup          : iptables-libs-1.8.4-15.el8.x86_64                                                                                                          125/139
  Cleanup          : kmod-25-16.el8.x86_64                                                                                                                      126/139
  Cleanup          : openssl-libs-1:1.1.1g-11.el8.x86_64                                                                                                        127/139
  Running scriptlet: openssl-libs-1:1.1.1g-11.el8.x86_64                                                                                                        127/139
  Running scriptlet: nettle-3.4.1-2.el8.x86_64                                                                                                                  128/139
  Cleanup          : nettle-3.4.1-2.el8.x86_64                                                                                                                  128/139
  Running scriptlet: nettle-3.4.1-2.el8.x86_64                                                                                                                  128/139
  Cleanup          : zlib-1.2.11-16.el8_2.x86_64                                                                                                                129/139
  Cleanup          : kernel-tools-libs-4.18.0-240.1.1.el8_3.x86_64                                                                                              130/139
  Running scriptlet: kernel-tools-libs-4.18.0-240.1.1.el8_3.x86_64                                                                                              130/139
  Cleanup          : crypto-policies-20200713-1.git51d1222.el8.noarch                                                                                           131/139
  Cleanup          : dbus-common-1:1.12.8-11.el8.noarch                                                                                                         132/139
  Cleanup          : grub2-common-1:2.02-90.el8.noarch                                                                                                          133/139
  Cleanup          : subscription-manager-rhsm-certificates-1.27.16-1.el8.x86_64                                                                                134/139
  Cleanup          : python3-syspurpose-1.27.16-1.el8.x86_64                                                                                                    135/139
  Cleanup          : glibc-common-2.28-127.el8.x86_64                                                                                                           136/139
  Cleanup          : glibc-langpack-en-2.28-127.el8.x86_64                                                                                                      137/139
  Cleanup          : glibc-2.28-127.el8.x86_64                                                                                                                  138/139
  Cleanup          : tzdata-2020d-1.el8.noarch                                                                                                                  139/139
  Running scriptlet: crypto-policies-scripts-20210209-1.gitbfb6bed.el8_3.noarch                                                                                 139/139
  Running scriptlet: kernel-core-4.18.0-240.22.1.el8_3.x86_64                                                                                                   139/139
Failed to add dependency on unit, unit systemd-ask-password-plymouth.service does not exist.
Failed to add dependency on unit, unit systemd-ask-password-plymouth.service does not exist.

  Running scriptlet: tuned-2.14.0-3.el8_3.2.noarch                                                                                                              139/139
  Running scriptlet: microcode_ctl-4:20200609-2.20210216.1.el8_3.x86_64                                                                                         139/139
Failed to add dependency on unit, unit systemd-ask-password-plymouth.service does not exist.
Failed to add dependency on unit, unit systemd-ask-password-plymouth.service does not exist.

  Running scriptlet: tzdata-2020d-1.el8.noarch                                                                                                                  139/139
  Running scriptlet: glibc-common-2.28-127.el8_3.2.x86_64                                                                                                       139/139
  Running scriptlet: systemd-239-41.el8_3.2.x86_64                                                                                                              139/139
  Running scriptlet: systemd-udev-239-41.el8_3.2.x86_64                                                                                                         139/139
  Verifying        : linux-firmware-20200619-101.git3890db36.el8_3.noarch                                                                                         1/139
  Verifying        : grub2-tools-efi-1:2.02-90.el8_3.1.x86_64                                                                                                     2/139
  Verifying        : kernel-4.18.0-240.22.1.el8_3.x86_64                                                                                                          3/139
  Verifying        : kernel-core-4.18.0-240.22.1.el8_3.x86_64                                                                                                     4/139
  Verifying        : kernel-modules-4.18.0-240.22.1.el8_3.x86_64                                                                                                  5/139
  Verifying        : rh-amazon-rhui-client-3.0.40-1.el8.noarch                                                                                                    6/139
  Verifying        : rh-amazon-rhui-client-3.0.32-1.el8.noarch                                                                                                    7/139
  Verifying        : insights-client-3.1.1-1.el8_3.noarch                                                                                                         8/139
  Verifying        : insights-client-3.1.0-3.el8.noarch                                                                                                           9/139
  Verifying        : qemu-guest-agent-15:4.2.0-34.module+el8.3.0+10437+1ca0c2ba.5.x86_64                                                                         10/139
  Verifying        : qemu-guest-agent-15:4.2.0-34.module+el8.3.0+7976+077be4ec.x86_64                                                                            11/139
  Verifying        : cloud-init-19.4-11.el8_3.3.noarch                                                                                                           12/139
  Verifying        : cloud-init-19.4-11.el8.noarch                                                                                                               13/139
  Verifying        : freetype-2.9.1-4.el8_3.1.x86_64                                                                                                             14/139
  Verifying        : freetype-2.9.1-4.el8.x86_64                                                                                                                 15/139
  Verifying        : libcurl-7.61.1-14.el8_3.1.x86_64                                                                                                            16/139
  Verifying        : libcurl-7.61.1-14.el8.x86_64                                                                                                                17/139
  Verifying        : iptables-libs-1.8.4-15.el8_3.3.x86_64                                                                                                       18/139
  Verifying        : iptables-libs-1.8.4-15.el8.x86_64                                                                                                           19/139
  Verifying        : curl-7.61.1-14.el8_3.1.x86_64                                                                                                               20/139
  Verifying        : curl-7.61.1-14.el8.x86_64                                                                                                                   21/139
  Verifying        : sudo-1.8.29-6.el8_3.1.x86_64                                                                                                                22/139
  Verifying        : sudo-1.8.29-6.el8.x86_64                                                                                                                    23/139
  Verifying        : tzdata-2021a-1.el8.noarch                                                                                                                   24/139
  Verifying        : tzdata-2020d-1.el8.noarch                                                                                                                   25/139
  Verifying        : device-mapper-libs-8:1.02.171-5.el8_3.2.x86_64                                                                                              26/139
  Verifying        : device-mapper-libs-8:1.02.171-5.el8.x86_64                                                                                                  27/139
  Verifying        : device-mapper-8:1.02.171-5.el8_3.2.x86_64                                                                                                   28/139
  Verifying        : device-mapper-8:1.02.171-5.el8.x86_64                                                                                                       29/139
  Verifying        : python3-syspurpose-1.27.18-1.el8_3.x86_64                                                                                                   30/139
  Verifying        : python3-syspurpose-1.27.16-1.el8.x86_64                                                                                                     31/139
  Verifying        : python3-subscription-manager-rhsm-1.27.18-1.el8_3.x86_64                                                                                    32/139
  Verifying        : python3-subscription-manager-rhsm-1.27.16-1.el8.x86_64                                                                                      33/139
  Verifying        : subscription-manager-1.27.18-1.el8_3.x86_64                                                                                                 34/139
  Verifying        : subscription-manager-1.27.16-1.el8.x86_64                                                                                                   35/139
  Verifying        : subscription-manager-rhsm-certificates-1.27.18-1.el8_3.x86_64                                                                               36/139
  Verifying        : subscription-manager-rhsm-certificates-1.27.16-1.el8.x86_64                                                                                 37/139
  Verifying        : kexec-tools-2.0.20-34.el8_3.2.x86_64                                                                                                        38/139
  Verifying        : kexec-tools-2.0.20-34.el8.x86_64                                                                                                            39/139
  Verifying        : dbus-common-1:1.12.8-12.el8_3.noarch                                                                                                        40/139
  Verifying        : dbus-common-1:1.12.8-11.el8.noarch                                                                                                          41/139
  Verifying        : dracut-config-rescue-049-95.git20200804.el8_3.4.x86_64                                                                                      42/139
  Verifying        : dracut-config-rescue-049-95.git20200804.el8.x86_64                                                                                          43/139
  Verifying        : dbus-tools-1:1.12.8-12.el8_3.x86_64                                                                                                         44/139
  Verifying        : dbus-tools-1:1.12.8-11.el8.x86_64                                                                                                           45/139
  Verifying        : dracut-network-049-95.git20200804.el8_3.4.x86_64                                                                                            46/139
  Verifying        : dracut-network-049-95.git20200804.el8.x86_64                                                                                                47/139
  Verifying        : glibc-common-2.28-127.el8_3.2.x86_64                                                                                                        48/139
  Verifying        : glibc-common-2.28-127.el8.x86_64                                                                                                            49/139
  Verifying        : tuned-2.14.0-3.el8_3.2.noarch                                                                                                               50/139
  Verifying        : tuned-2.14.0-3.el8.noarch                                                                                                                   51/139
  Verifying        : dbus-daemon-1:1.12.8-12.el8_3.x86_64                                                                                                        52/139
  Verifying        : dbus-daemon-1:1.12.8-11.el8.x86_64                                                                                                          53/139
  Verifying        : dracut-049-95.git20200804.el8_3.4.x86_64                                                                                                    54/139
  Verifying        : dracut-049-95.git20200804.el8.x86_64                                                                                                        55/139
  Verifying        : dracut-squash-049-95.git20200804.el8_3.4.x86_64                                                                                             56/139
  Verifying        : dracut-squash-049-95.git20200804.el8.x86_64                                                                                                 57/139
  Verifying        : glibc-langpack-en-2.28-127.el8_3.2.x86_64                                                                                                   58/139
  Verifying        : glibc-langpack-en-2.28-127.el8.x86_64                                                                                                       59/139
  Verifying        : kmod-libs-25-16.el8_3.1.x86_64                                                                                                              60/139
  Verifying        : kmod-libs-25-16.el8.x86_64                                                                                                                  61/139
  Verifying        : glibc-2.28-127.el8_3.2.x86_64                                                                                                               62/139
  Verifying        : glibc-2.28-127.el8.x86_64                                                                                                                   63/139
  Verifying        : dbus-1:1.12.8-12.el8_3.x86_64                                                                                                               64/139
  Verifying        : dbus-1:1.12.8-11.el8.x86_64                                                                                                                 65/139
  Verifying        : dnf-plugin-subscription-manager-1.27.18-1.el8_3.x86_64                                                                                      66/139
  Verifying        : dnf-plugin-subscription-manager-1.27.16-1.el8.x86_64                                                                                        67/139
  Verifying        : kmod-25-16.el8_3.1.x86_64                                                                                                                   68/139
  Verifying        : kmod-25-16.el8.x86_64                                                                                                                       69/139
  Verifying        : dbus-libs-1:1.12.8-12.el8_3.x86_64                                                                                                          70/139
  Verifying        : dbus-libs-1:1.12.8-11.el8.x86_64                                                                                                            71/139
  Verifying        : dracut-config-generic-049-95.git20200804.el8_3.4.x86_64                                                                                     72/139
  Verifying        : dracut-config-generic-049-95.git20200804.el8.x86_64                                                                                         73/139
  Verifying        : microcode_ctl-4:20200609-2.20210216.1.el8_3.x86_64                                                                                          74/139
  Verifying        : microcode_ctl-4:20200609-2.el8.x86_64                                                                                                       75/139
  Verifying        : bind-export-libs-32:9.11.20-5.el8_3.1.x86_64                                                                                                76/139
  Verifying        : bind-export-libs-32:9.11.20-5.el8.x86_64                                                                                                    77/139
  Verifying        : grub2-tools-minimal-1:2.02-90.el8_3.1.x86_64                                                                                                78/139
  Verifying        : grub2-tools-minimal-1:2.02-90.el8.x86_64                                                                                                    79/139
  Verifying        : grub2-tools-extra-1:2.02-90.el8_3.1.x86_64                                                                                                  80/139
  Verifying        : grub2-tools-extra-1:2.02-90.el8.x86_64                                                                                                      81/139
  Verifying        : grub2-pc-1:2.02-90.el8_3.1.x86_64                                                                                                           82/139
  Verifying        : grub2-pc-1:2.02-90.el8.x86_64                                                                                                               83/139
  Verifying        : grub2-common-1:2.02-90.el8_3.1.noarch                                                                                                       84/139
  Verifying        : grub2-common-1:2.02-90.el8.noarch                                                                                                           85/139
  Verifying        : grub2-tools-1:2.02-90.el8_3.1.x86_64                                                                                                        86/139
  Verifying        : grub2-tools-1:2.02-90.el8.x86_64                                                                                                            87/139
  Verifying        : grub2-pc-modules-1:2.02-90.el8_3.1.noarch                                                                                                   88/139
  Verifying        : grub2-pc-modules-1:2.02-90.el8.noarch                                                                                                       89/139
  Verifying        : openssl-1:1.1.1g-15.el8_3.x86_64                                                                                                            90/139
  Verifying        : openssl-1:1.1.1g-11.el8.x86_64                                                                                                              91/139
  Verifying        : openssl-libs-1:1.1.1g-15.el8_3.x86_64                                                                                                       92/139
  Verifying        : openssl-libs-1:1.1.1g-11.el8.x86_64                                                                                                         93/139
  Verifying        : systemd-libs-239-41.el8_3.2.x86_64                                                                                                          94/139
  Verifying        : systemd-libs-239-41.el8_3.x86_64                                                                                                            95/139
  Verifying        : file-libs-5.33-16.el8_3.1.x86_64                                                                                                            96/139
  Verifying        : file-libs-5.33-16.el8.x86_64                                                                                                                97/139
  Verifying        : systemd-pam-239-41.el8_3.2.x86_64                                                                                                           98/139
  Verifying        : systemd-pam-239-41.el8_3.x86_64                                                                                                             99/139
  Verifying        : NetworkManager-tui-1:1.26.0-14.el8_3.x86_64                                                                                                100/139
  Verifying        : NetworkManager-tui-1:1.26.0-9.el8_3.x86_64                                                                                                 101/139
  Verifying        : NetworkManager-team-1:1.26.0-14.el8_3.x86_64                                                                                               102/139
  Verifying        : NetworkManager-team-1:1.26.0-9.el8_3.x86_64                                                                                                103/139
  Verifying        : kernel-tools-4.18.0-240.22.1.el8_3.x86_64                                                                                                  104/139
  Verifying        : kernel-tools-4.18.0-240.1.1.el8_3.x86_64                                                                                                   105/139
  Verifying        : crypto-policies-scripts-20210209-1.gitbfb6bed.el8_3.noarch                                                                                 106/139
  Verifying        : crypto-policies-scripts-20200713-1.git51d1222.el8.noarch                                                                                   107/139
  Verifying        : systemd-239-41.el8_3.2.x86_64                                                                                                              108/139
  Verifying        : systemd-239-41.el8_3.x86_64                                                                                                                109/139
  Verifying        : python3-perf-4.18.0-240.22.1.el8_3.x86_64                                                                                                  110/139
  Verifying        : python3-perf-4.18.0-240.1.1.el8_3.x86_64                                                                                                   111/139
  Verifying        : zlib-1.2.11-16.2.el8_3.x86_64                                                                                                              112/139
  Verifying        : zlib-1.2.11-16.el8_2.x86_64                                                                                                                113/139
  Verifying        : NetworkManager-libnm-1:1.26.0-14.el8_3.x86_64                                                                                              114/139
  Verifying        : NetworkManager-libnm-1:1.26.0-9.el8_3.x86_64                                                                                               115/139
  Verifying        : file-5.33-16.el8_3.1.x86_64                                                                                                                116/139
  Verifying        : file-5.33-16.el8.x86_64                                                                                                                    117/139
  Verifying        : systemd-udev-239-41.el8_3.2.x86_64                                                                                                         118/139
  Verifying        : systemd-udev-239-41.el8_3.x86_64                                                                                                           119/139
  Verifying        : crypto-policies-20210209-1.gitbfb6bed.el8_3.noarch                                                                                         120/139
  Verifying        : crypto-policies-20200713-1.git51d1222.el8.noarch                                                                                           121/139
  Verifying        : kernel-tools-libs-4.18.0-240.22.1.el8_3.x86_64                                                                                             122/139
  Verifying        : kernel-tools-libs-4.18.0-240.1.1.el8_3.x86_64                                                                                              123/139
  Verifying        : NetworkManager-1:1.26.0-14.el8_3.x86_64                                                                                                    124/139
  Verifying        : NetworkManager-1:1.26.0-9.el8_3.x86_64                                                                                                     125/139
  Verifying        : python3-magic-5.33-16.el8_3.1.noarch                                                                                                       126/139
  Verifying        : python3-magic-5.33-16.el8.noarch                                                                                                           127/139
  Verifying        : libldb-2.1.3-3.el8_3.x86_64                                                                                                                128/139
  Verifying        : libldb-2.1.3-2.el8.x86_64                                                                                                                  129/139
  Verifying        : nettle-3.4.1-4.el8_3.x86_64                                                                                                                130/139
  Verifying        : nettle-3.4.1-2.el8.x86_64                                                                                                                  131/139
  Verifying        : gnutls-3.6.14-8.el8_3.x86_64                                                                                                               132/139
  Verifying        : gnutls-3.6.14-6.el8.x86_64                                                                                                                 133/139
  Verifying        : procps-ng-3.3.15-3.el8_3.1.x86_64                                                                                                          134/139
  Verifying        : procps-ng-3.3.15-3.el8.x86_64                                                                                                              135/139
  Verifying        : selinux-policy-targeted-3.14.3-54.el8_3.4.noarch                                                                                           136/139
  Verifying        : selinux-policy-targeted-3.14.3-54.el8.noarch                                                                                               137/139
  Verifying        : selinux-policy-3.14.3-54.el8_3.4.noarch                                                                                                    138/139
  Verifying        : selinux-policy-3.14.3-54.el8.noarch                                                                                                        139/139

Upgraded:
  NetworkManager-1:1.26.0-14.el8_3.x86_64                                         NetworkManager-libnm-1:1.26.0-14.el8_3.x86_64
  NetworkManager-team-1:1.26.0-14.el8_3.x86_64                                    NetworkManager-tui-1:1.26.0-14.el8_3.x86_64
  bind-export-libs-32:9.11.20-5.el8_3.1.x86_64                                    cloud-init-19.4-11.el8_3.3.noarch
  crypto-policies-20210209-1.gitbfb6bed.el8_3.noarch                              crypto-policies-scripts-20210209-1.gitbfb6bed.el8_3.noarch
  curl-7.61.1-14.el8_3.1.x86_64                                                   dbus-1:1.12.8-12.el8_3.x86_64
  dbus-common-1:1.12.8-12.el8_3.noarch                                            dbus-daemon-1:1.12.8-12.el8_3.x86_64
  dbus-libs-1:1.12.8-12.el8_3.x86_64                                              dbus-tools-1:1.12.8-12.el8_3.x86_64
  device-mapper-8:1.02.171-5.el8_3.2.x86_64                                       device-mapper-libs-8:1.02.171-5.el8_3.2.x86_64
  dnf-plugin-subscription-manager-1.27.18-1.el8_3.x86_64                          dracut-049-95.git20200804.el8_3.4.x86_64
  dracut-config-generic-049-95.git20200804.el8_3.4.x86_64                         dracut-config-rescue-049-95.git20200804.el8_3.4.x86_64
  dracut-network-049-95.git20200804.el8_3.4.x86_64                                dracut-squash-049-95.git20200804.el8_3.4.x86_64
  file-5.33-16.el8_3.1.x86_64                                                     file-libs-5.33-16.el8_3.1.x86_64
  freetype-2.9.1-4.el8_3.1.x86_64                                                 glibc-2.28-127.el8_3.2.x86_64
  glibc-common-2.28-127.el8_3.2.x86_64                                            glibc-langpack-en-2.28-127.el8_3.2.x86_64
  gnutls-3.6.14-8.el8_3.x86_64                                                    grub2-common-1:2.02-90.el8_3.1.noarch
  grub2-pc-1:2.02-90.el8_3.1.x86_64                                               grub2-pc-modules-1:2.02-90.el8_3.1.noarch
  grub2-tools-1:2.02-90.el8_3.1.x86_64                                            grub2-tools-extra-1:2.02-90.el8_3.1.x86_64
  grub2-tools-minimal-1:2.02-90.el8_3.1.x86_64                                    insights-client-3.1.1-1.el8_3.noarch
  iptables-libs-1.8.4-15.el8_3.3.x86_64                                           kernel-tools-4.18.0-240.22.1.el8_3.x86_64
  kernel-tools-libs-4.18.0-240.22.1.el8_3.x86_64                                  kexec-tools-2.0.20-34.el8_3.2.x86_64
  kmod-25-16.el8_3.1.x86_64                                                       kmod-libs-25-16.el8_3.1.x86_64
  libcurl-7.61.1-14.el8_3.1.x86_64                                                libldb-2.1.3-3.el8_3.x86_64
  microcode_ctl-4:20200609-2.20210216.1.el8_3.x86_64                              nettle-3.4.1-4.el8_3.x86_64
  openssl-1:1.1.1g-15.el8_3.x86_64                                                openssl-libs-1:1.1.1g-15.el8_3.x86_64
  procps-ng-3.3.15-3.el8_3.1.x86_64                                               python3-magic-5.33-16.el8_3.1.noarch
  python3-perf-4.18.0-240.22.1.el8_3.x86_64                                       python3-subscription-manager-rhsm-1.27.18-1.el8_3.x86_64
  python3-syspurpose-1.27.18-1.el8_3.x86_64                                       qemu-guest-agent-15:4.2.0-34.module+el8.3.0+10437+1ca0c2ba.5.x86_64
  rh-amazon-rhui-client-3.0.40-1.el8.noarch                                       selinux-policy-3.14.3-54.el8_3.4.noarch
  selinux-policy-targeted-3.14.3-54.el8_3.4.noarch                                subscription-manager-1.27.18-1.el8_3.x86_64
  subscription-manager-rhsm-certificates-1.27.18-1.el8_3.x86_64                   sudo-1.8.29-6.el8_3.1.x86_64
  systemd-239-41.el8_3.2.x86_64                                                   systemd-libs-239-41.el8_3.2.x86_64
  systemd-pam-239-41.el8_3.2.x86_64                                               systemd-udev-239-41.el8_3.2.x86_64
  tuned-2.14.0-3.el8_3.2.noarch                                                   tzdata-2021a-1.el8.noarch
  zlib-1.2.11-16.2.el8_3.x86_64

Installed:
  grub2-tools-efi-1:2.02-90.el8_3.1.x86_64             kernel-4.18.0-240.22.1.el8_3.x86_64                           kernel-core-4.18.0-240.22.1.el8_3.x86_64
  kernel-modules-4.18.0-240.22.1.el8_3.x86_64          linux-firmware-20200619-101.git3890db36.el8_3.noarch

Complete!
[root@ip-172-31-45-89 ~]#

---------------------------------------------------------------------

[root@ip-172-31-45-89 ~]# wget https://releases.hashicorp.com/terraform/0.15.3/terraform_0.15.3_linux_amd64.zip
--2021-05-15 19:50:51--  https://releases.hashicorp.com/terraform/0.15.3/terraform_0.15.3_linux_amd64.zip
Resolving releases.hashicorp.com (releases.hashicorp.com)... 151.101.153.183, 2a04:4e42:42::439
Connecting to releases.hashicorp.com (releases.hashicorp.com)|151.101.153.183|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 32743141 (31M) [application/zip]
Saving to: ‘terraform_0.15.3_linux_amd64.zip’

terraform_0.15.3_linux_amd64.zip          100%[=====================================================================================>]  31.23M   109MB/s    in 0.3s

2021-05-15 19:50:51 (109 MB/s) - ‘terraform_0.15.3_linux_amd64.zip’ saved [32743141/32743141]

[root@ip-172-31-45-89 ~]#


--------------------------------------------------------------------

[root@ip-172-31-45-89 ~]# unzip terraform_0.15.3_linux_amd64.zip -d /usr/local/bin/
Archive:  terraform_0.15.3_linux_amd64.zip
  inflating: /usr/local/bin/terraform
[root@ip-172-31-45-89 ~]#


------------------------------------------------------------------

[root@ip-172-31-45-89 manoj_terraform]# cat EC2.tf
resource "aws_instance" "Demo_instance" {
ami = "ami-0a9d27a9f4f5c0efc"
instance_type = "t2.micro"
key_name = "test"
tags ={
Name = "Demo_server"
}
}

[root@ip-172-31-45-89 manoj_terraform]#

---------------------------------------------------------------

[root@ip-172-31-45-89 manoj_terraform]# terraform plan

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # aws_instance.Demo_instance will be created
  + resource "aws_instance" "Demo_instance" {
      + ami                                  = "ami-0a9d27a9f4f5c0efc"
      + arn                                  = (known after apply)
      + associate_public_ip_address          = (known after apply)
      + availability_zone                    = (known after apply)
      + cpu_core_count                       = (known after apply)
      + cpu_threads_per_core                 = (known after apply)
      + get_password_data                    = false
      + host_id                              = (known after apply)
      + id                                   = (known after apply)
      + instance_initiated_shutdown_behavior = (known after apply)
      + instance_state                       = (known after apply)
      + instance_type                        = "t2.micro"
      + ipv6_address_count                   = (known after apply)
      + ipv6_addresses                       = (known after apply)
      + key_name                             = "test"
      + outpost_arn                          = (known after apply)
      + password_data                        = (known after apply)
      + placement_group                      = (known after apply)
      + primary_network_interface_id         = (known after apply)
      + private_dns                          = (known after apply)
      + private_ip                           = (known after apply)
      + public_dns                           = (known after apply)
      + public_ip                            = (known after apply)
      + secondary_private_ips                = (known after apply)
      + security_groups                      = (known after apply)
      + source_dest_check                    = true
      + subnet_id                            = (known after apply)
      + tags                                 = {
          + "Name" = "Demo_server"
        }
      + tags_all                             = {
          + "Name" = "Demo_server"
        }
      + tenancy                              = (known after apply)
      + vpc_security_group_ids               = (known after apply)

      + ebs_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + snapshot_id           = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }

      + enclave_options {
          + enabled = (known after apply)
        }

      + ephemeral_block_device {
          + device_name  = (known after apply)
          + no_device    = (known after apply)
          + virtual_name = (known after apply)
        }

      + metadata_options {
          + http_endpoint               = (known after apply)
          + http_put_response_hop_limit = (known after apply)
          + http_tokens                 = (known after apply)
        }

      + network_interface {
          + delete_on_termination = (known after apply)
          + device_index          = (known after apply)
          + network_interface_id  = (known after apply)
        }

      + root_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }
    }

Plan: 1 to add, 0 to change, 0 to destroy.

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

Note: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run "terraform apply" now.
[root@ip-172-31-45-89 manoj_terraform]#

----------------------------------------------------------------------------------------------
[root@ip-172-31-45-89 manoj_terraform]# terraform apply

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # aws_instance.Demo_instance will be created
  + resource "aws_instance" "Demo_instance" {
      + ami                                  = "ami-0a9d27a9f4f5c0efc"
      + arn                                  = (known after apply)
      + associate_public_ip_address          = (known after apply)
      + availability_zone                    = (known after apply)
      + cpu_core_count                       = (known after apply)
      + cpu_threads_per_core                 = (known after apply)
      + get_password_data                    = false
      + host_id                              = (known after apply)
      + id                                   = (known after apply)
      + instance_initiated_shutdown_behavior = (known after apply)
      + instance_state                       = (known after apply)
      + instance_type                        = "t2.micro"
      + ipv6_address_count                   = (known after apply)
      + ipv6_addresses                       = (known after apply)
      + key_name                             = "test"
      + outpost_arn                          = (known after apply)
      + password_data                        = (known after apply)
      + placement_group                      = (known after apply)
      + primary_network_interface_id         = (known after apply)
      + private_dns                          = (known after apply)
      + private_ip                           = (known after apply)
      + public_dns                           = (known after apply)
      + public_ip                            = (known after apply)
      + secondary_private_ips                = (known after apply)
      + security_groups                      = (known after apply)
      + source_dest_check                    = true
      + subnet_id                            = (known after apply)
      + tags                                 = {
          + "Name" = "Demo_server"
        }
      + tags_all                             = {
          + "Name" = "Demo_server"
        }
      + tenancy                              = (known after apply)
      + vpc_security_group_ids               = (known after apply)

      + ebs_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + snapshot_id           = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }

      + enclave_options {
          + enabled = (known after apply)
        }

      + ephemeral_block_device {
          + device_name  = (known after apply)
          + no_device    = (known after apply)
          + virtual_name = (known after apply)
        }

      + metadata_options {
          + http_endpoint               = (known after apply)
          + http_put_response_hop_limit = (known after apply)
          + http_tokens                 = (known after apply)
        }

      + network_interface {
          + delete_on_termination = (known after apply)
          + device_index          = (known after apply)
          + network_interface_id  = (known after apply)
        }

      + root_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }
    }

Plan: 1 to add, 0 to change, 0 to destroy.

Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.

  Enter a value: yes

aws_instance.Demo_instance: Creating...
aws_instance.Demo_instance: Still creating... [10s elapsed]
aws_instance.Demo_instance: Still creating... [20s elapsed]
aws_instance.Demo_instance: Still creating... [30s elapsed]
aws_instance.Demo_instance: Creation complete after 30s [id=i-056e19670b7e443e8]

Apply complete! Resources: 1 added, 0 changed, 0 destroyed.
[root@ip-172-31-45-89 manoj_terraform]#

-------------------------------------------------------------------------------------------------------------
[root@ip-172-31-45-89 manoj_terraform]# vi VPC.tf
[root@ip-172-31-45-89 manoj_terraform]# cat VPC.tf
# VPC
resource "aws_vpc" "My_VPC" {
  cidr_block           = "10.0.0.0/16"
  instance_tenancy     = "default"
  enable_dns_support   = "true"
  enable_dns_hostnames = "true"
tags = {
    Name = "Demo_VPC"
  }

}
# Create Internet Gateway and attach to the VPC
resource "aws_internet_gateway" "My_igw" {
  vpc_id = aws_vpc.My_VPC.id
  tags = {
    Name = "demo_igw"
  }
}

[root@ip-172-31-45-89 manoj_terraform]# terraform plan
aws_instance.Demo_instance: Refreshing state... [id=i-056e19670b7e443e8]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # aws_internet_gateway.My_igw will be created
  + resource "aws_internet_gateway" "My_igw" {
      + arn      = (known after apply)
      + id       = (known after apply)
      + owner_id = (known after apply)
      + tags     = {
          + "Name" = "demo_igw"
        }
      + tags_all = {
          + "Name" = "demo_igw"
        }
      + vpc_id   = (known after apply)
    }

  # aws_vpc.My_VPC will be created
  + resource "aws_vpc" "My_VPC" {
      + arn                              = (known after apply)
      + assign_generated_ipv6_cidr_block = false
      + cidr_block                       = "10.0.0.0/16"
      + default_network_acl_id           = (known after apply)
      + default_route_table_id           = (known after apply)
      + default_security_group_id        = (known after apply)
      + dhcp_options_id                  = (known after apply)
      + enable_classiclink               = (known after apply)
      + enable_classiclink_dns_support   = (known after apply)
      + enable_dns_hostnames             = true
      + enable_dns_support               = true
      + id                               = (known after apply)
      + instance_tenancy                 = "default"
      + ipv6_association_id              = (known after apply)
      + ipv6_cidr_block                  = (known after apply)
      + main_route_table_id              = (known after apply)
      + owner_id                         = (known after apply)
      + tags                             = {
          + "Name" = "Demo_VPC"
        }
      + tags_all                         = {
          + "Name" = "Demo_VPC"
        }
    }

Plan: 2 to add, 0 to change, 0 to destroy.

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

Note: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run "terraform apply" now.
[root@ip-172-31-45-89 manoj_terraform]#

----------------------------------------------------------------------------------------------------

[root@ip-172-31-45-89 manoj_terraform]# terraform apply
aws_instance.Demo_instance: Refreshing state... [id=i-056e19670b7e443e8]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # aws_internet_gateway.My_igw will be created
  + resource "aws_internet_gateway" "My_igw" {
      + arn      = (known after apply)
      + id       = (known after apply)
      + owner_id = (known after apply)
      + tags     = {
          + "Name" = "demo_igw"
        }
      + tags_all = {
          + "Name" = "demo_igw"
        }
      + vpc_id   = (known after apply)
    }

  # aws_vpc.My_VPC will be created
  + resource "aws_vpc" "My_VPC" {
      + arn                              = (known after apply)
      + assign_generated_ipv6_cidr_block = false
      + cidr_block                       = "10.0.0.0/16"
      + default_network_acl_id           = (known after apply)
      + default_route_table_id           = (known after apply)
      + default_security_group_id        = (known after apply)
      + dhcp_options_id                  = (known after apply)
      + enable_classiclink               = (known after apply)
      + enable_classiclink_dns_support   = (known after apply)
      + enable_dns_hostnames             = true
      + enable_dns_support               = true
      + id                               = (known after apply)
      + instance_tenancy                 = "default"
      + ipv6_association_id              = (known after apply)
      + ipv6_cidr_block                  = (known after apply)
      + main_route_table_id              = (known after apply)
      + owner_id                         = (known after apply)
      + tags                             = {
          + "Name" = "Demo_VPC"
        }
      + tags_all                         = {
          + "Name" = "Demo_VPC"
        }
    }

Plan: 2 to add, 0 to change, 0 to destroy.

Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.

  Enter a value: yes

aws_vpc.My_VPC: Creating...
aws_vpc.My_VPC: Still creating... [10s elapsed]
aws_vpc.My_VPC: Creation complete after 11s [id=vpc-0c440e4c3f594e85a]
aws_internet_gateway.My_igw: Creating...
aws_internet_gateway.My_igw: Creation complete after 0s [id=igw-00b3fd8e4fad63924]

Apply complete! Resources: 2 added, 0 changed, 0 destroyed.
[root@ip-172-31-45-89 manoj_terraform]#


---------------------------------------------------------------------------------------------
[root@ip-172-31-45-89 manoj_terraform]# terraform plan
aws_instance.Demo_instance: Refreshing state... [id=i-056e19670b7e443e8]
aws_vpc.My_VPC: Refreshing state... [id=vpc-0c440e4c3f594e85a]
aws_internet_gateway.My_igw: Refreshing state... [id=igw-00b3fd8e4fad63924]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create
 <= read (data resources)

Terraform will perform the following actions:

  # data.aws_subnet_ids.subnet will be read during apply
  # (config refers to values not yet known)
 <= data "aws_subnet_ids" "subnet"  {
      + id     = (known after apply)
      + ids    = (known after apply)
      + tags   = (known after apply)
      + vpc_id = (known after apply)
    }

  # aws_alb.my_aws_alb will be created
  + resource "aws_alb" "my_aws_alb" {
      + arn                        = (known after apply)
      + arn_suffix                 = (known after apply)
      + dns_name                   = (known after apply)
      + drop_invalid_header_fields = false
      + enable_deletion_protection = true
      + enable_http2               = true
      + id                         = (known after apply)
      + idle_timeout               = 60
      + internal                   = false
      + ip_address_type            = "ipv4"
      + load_balancer_type         = "application"
      + name                       = "Manoj-ALB-Demo"
      + security_groups            = (known after apply)
      + subnets                    = (known after apply)
      + tags                       = {
          + "Environment" = "Testing"
          + "Name"        = "Manoj-ALB-Demo"
        }
      + tags_all                   = {
          + "Environment" = "Testing"
          + "Name"        = "Manoj-ALB-Demo"
        }
      + vpc_id                     = (known after apply)
      + zone_id                    = (known after apply)

      + subnet_mapping {
          + allocation_id        = (known after apply)
          + ipv6_address         = (known after apply)
          + outpost_id           = (known after apply)
          + private_ipv4_address = (known after apply)
          + subnet_id            = (known after apply)
        }
    }

  # aws_alb_listener.my_alb_listener will be created
  + resource "aws_alb_listener" "my_alb_listener" {
      + arn               = (known after apply)
      + id                = (known after apply)
      + load_balancer_arn = (known after apply)
      + port              = 80
      + protocol          = "HTTP"
      + ssl_policy        = (known after apply)
      + tags_all          = (known after apply)

      + default_action {
          + order            = (known after apply)
          + target_group_arn = (known after apply)
          + type             = "forward"
        }
    }

  # aws_alb_target_group.my_target_group will be created
  + resource "aws_alb_target_group" "my_target_group" {
      + arn                                = (known after apply)
      + arn_suffix                         = (known after apply)
      + deregistration_delay               = 300
      + id                                 = (known after apply)
      + lambda_multi_value_headers_enabled = false
      + load_balancing_algorithm_type      = (known after apply)
      + name                               = "my-test-tg"
      + port                               = 80
      + preserve_client_ip                 = (known after apply)
      + protocol                           = "HTTP"
      + protocol_version                   = (known after apply)
      + proxy_protocol_v2                  = false
      + slow_start                         = 0
      + tags_all                           = (known after apply)
      + target_type                        = "instance"
      + vpc_id                             = (known after apply)

      + health_check {
          + enabled             = true
          + healthy_threshold   = 5
          + interval            = 20
          + matcher             = "200"
          + path                = "/"
          + port                = "traffic-port"
          + protocol            = "HTTP"
          + timeout             = 3
          + unhealthy_threshold = 2
        }

      + stickiness {
          + cookie_duration = (known after apply)
          + enabled         = (known after apply)
          + type            = (known after apply)
        }
    }

  # aws_alb_target_group_attachment.ec2_attach[0] will be created
  + resource "aws_alb_target_group_attachment" "ec2_attach" {
      + id               = (known after apply)
      + target_group_arn = (known after apply)
      + target_id        = (known after apply)
    }

  # aws_alb_target_group_attachment.ec2_attach[1] will be created
  + resource "aws_alb_target_group_attachment" "ec2_attach" {
      + id               = (known after apply)
      + target_group_arn = (known after apply)
      + target_id        = (known after apply)
    }

  # aws_default_vpc.default will be created
  + resource "aws_default_vpc" "default" {
      + arn                              = (known after apply)
      + assign_generated_ipv6_cidr_block = (known after apply)
      + cidr_block                       = (known after apply)
      + default_network_acl_id           = (known after apply)
      + default_route_table_id           = (known after apply)
      + default_security_group_id        = (known after apply)
      + dhcp_options_id                  = (known after apply)
      + enable_classiclink               = (known after apply)
      + enable_classiclink_dns_support   = (known after apply)
      + enable_dns_hostnames             = (known after apply)
      + enable_dns_support               = true
      + id                               = (known after apply)
      + instance_tenancy                 = (known after apply)
      + ipv6_association_id              = (known after apply)
      + ipv6_cidr_block                  = (known after apply)
      + main_route_table_id              = (known after apply)
      + owner_id                         = (known after apply)
      + tags                             = {
          + "Name" = "Default VPC"
        }
      + tags_all                         = {
          + "Name" = "Default VPC"
        }
    }

  # aws_eip.myeip[0] will be created
  + resource "aws_eip" "myeip" {
      + allocation_id        = (known after apply)
      + association_id       = (known after apply)
      + carrier_ip           = (known after apply)
      + customer_owned_ip    = (known after apply)
      + domain               = (known after apply)
      + id                   = (known after apply)
      + instance             = (known after apply)
      + network_border_group = (known after apply)
      + network_interface    = (known after apply)
      + private_dns          = (known after apply)
      + private_ip           = (known after apply)
      + public_dns           = (known after apply)
      + public_ip            = (known after apply)
      + public_ipv4_pool     = (known after apply)
      + tags                 = {
          + "Name" = "eip-Target_Server1"
        }
      + tags_all             = {
          + "Name" = "eip-Target_Server1"
        }
      + vpc                  = true
    }

  # aws_eip.myeip[1] will be created
  + resource "aws_eip" "myeip" {
      + allocation_id        = (known after apply)
      + association_id       = (known after apply)
      + carrier_ip           = (known after apply)
      + customer_owned_ip    = (known after apply)
      + domain               = (known after apply)
      + id                   = (known after apply)
      + instance             = (known after apply)
      + network_border_group = (known after apply)
      + network_interface    = (known after apply)
      + private_dns          = (known after apply)
      + private_ip           = (known after apply)
      + public_dns           = (known after apply)
      + public_ip            = (known after apply)
      + public_ipv4_pool     = (known after apply)
      + tags                 = {
          + "Name" = "eip-Target_Server2"
        }
      + tags_all             = {
          + "Name" = "eip-Target_Server2"
        }
      + vpc                  = true
    }

  # aws_instance.base[0] will be created
  + resource "aws_instance" "base" {
      + ami                                  = "ami-0a9d27a9f4f5c0efc"
      + arn                                  = (known after apply)
      + associate_public_ip_address          = (known after apply)
      + availability_zone                    = (known after apply)
      + cpu_core_count                       = (known after apply)
      + cpu_threads_per_core                 = (known after apply)
      + get_password_data                    = false
      + host_id                              = (known after apply)
      + id                                   = (known after apply)
      + instance_initiated_shutdown_behavior = (known after apply)
      + instance_state                       = (known after apply)
      + instance_type                        = "t2.micro"
      + ipv6_address_count                   = (known after apply)
      + ipv6_addresses                       = (known after apply)
      + key_name                             = "test"
      + outpost_arn                          = (known after apply)
      + password_data                        = (known after apply)
      + placement_group                      = (known after apply)
      + primary_network_interface_id         = (known after apply)
      + private_dns                          = (known after apply)
      + private_ip                           = (known after apply)
      + public_dns                           = (known after apply)
      + public_ip                            = (known after apply)
      + secondary_private_ips                = (known after apply)
      + security_groups                      = (known after apply)
      + source_dest_check                    = true
      + subnet_id                            = (known after apply)
      + tags                                 = {
          + "Name" = "Target_Server{count.index}"
        }
      + tags_all                             = {
          + "Name" = "Target_Server{count.index}"
        }
      + tenancy                              = (known after apply)
      + user_data                            = "e6a3e078524f41a332ae44be48b53e8fc452c8b9"
      + vpc_security_group_ids               = (known after apply)

      + ebs_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + snapshot_id           = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }

      + enclave_options {
          + enabled = (known after apply)
        }

      + ephemeral_block_device {
          + device_name  = (known after apply)
          + no_device    = (known after apply)
          + virtual_name = (known after apply)
        }

      + metadata_options {
          + http_endpoint               = (known after apply)
          + http_put_response_hop_limit = (known after apply)
          + http_tokens                 = (known after apply)
        }

      + network_interface {
          + delete_on_termination = (known after apply)
          + device_index          = (known after apply)
          + network_interface_id  = (known after apply)
        }

      + root_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }
    }

  # aws_instance.base[1] will be created
  + resource "aws_instance" "base" {
      + ami                                  = "ami-0a9d27a9f4f5c0efc"
      + arn                                  = (known after apply)
      + associate_public_ip_address          = (known after apply)
      + availability_zone                    = (known after apply)
      + cpu_core_count                       = (known after apply)
      + cpu_threads_per_core                 = (known after apply)
      + get_password_data                    = false
      + host_id                              = (known after apply)
      + id                                   = (known after apply)
      + instance_initiated_shutdown_behavior = (known after apply)
      + instance_state                       = (known after apply)
      + instance_type                        = "t2.micro"
      + ipv6_address_count                   = (known after apply)
      + ipv6_addresses                       = (known after apply)
      + key_name                             = "test"
      + outpost_arn                          = (known after apply)
      + password_data                        = (known after apply)
      + placement_group                      = (known after apply)
      + primary_network_interface_id         = (known after apply)
      + private_dns                          = (known after apply)
      + private_ip                           = (known after apply)
      + public_dns                           = (known after apply)
      + public_ip                            = (known after apply)
      + secondary_private_ips                = (known after apply)
      + security_groups                      = (known after apply)
      + source_dest_check                    = true
      + subnet_id                            = (known after apply)
      + tags                                 = {
          + "Name" = "Target_Server{count.index}"
        }
      + tags_all                             = {
          + "Name" = "Target_Server{count.index}"
        }
      + tenancy                              = (known after apply)
      + user_data                            = "e6a3e078524f41a332ae44be48b53e8fc452c8b9"
      + vpc_security_group_ids               = (known after apply)

      + ebs_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + snapshot_id           = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }

      + enclave_options {
          + enabled = (known after apply)
        }

      + ephemeral_block_device {
          + device_name  = (known after apply)
          + no_device    = (known after apply)
          + virtual_name = (known after apply)
        }

      + metadata_options {
          + http_endpoint               = (known after apply)
          + http_put_response_hop_limit = (known after apply)
          + http_tokens                 = (known after apply)
        }

      + network_interface {
          + delete_on_termination = (known after apply)
          + device_index          = (known after apply)
          + network_interface_id  = (known after apply)
        }

      + root_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }
    }

  # aws_security_group.allow_ports will be created
  + resource "aws_security_group" "allow_ports" {
      + arn                    = (known after apply)
      + description            = "control inbound traffic to the application load balancer"
      + egress                 = [
          + {
              + cidr_blocks      = [
                  + "0.0.0.0/0",
                ]
              + description      = "Control outbound traffic to the application load balancer"
              + from_port        = 0
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "-1"
              + security_groups  = []
              + self             = false
              + to_port          = 0
            },
        ]
      + id                     = (known after apply)
      + ingress                = [
          + {
              + cidr_blocks      = [
                  + "0.0.0.0/0",
                ]
              + description      = "TLS from VPC"
              + from_port        = 443
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "tcp"
              + security_groups  = []
              + self             = false
              + to_port          = 443
            },
          + {
              + cidr_blocks      = [
                  + "0.0.0.0/0",
                ]
              + description      = "http from VPC"
              + from_port        = 80
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "tcp"
              + security_groups  = []
              + self             = false
              + to_port          = 80
            },
          + {
              + cidr_blocks      = [
                  + "0.0.0.0/0",
                ]
              + description      = "outbound traffic from VPC"
              + from_port        = 8080
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "tcp"
              + security_groups  = []
              + self             = false
              + to_port          = 8080
            },
        ]
      + name                   = "alb-group"
      + name_prefix            = (known after apply)
      + owner_id               = (known after apply)
      + revoke_rules_on_delete = false
      + tags                   = {
          + "Name" = "allow_ports"
        }
      + tags_all               = {
          + "Name" = "allow_ports"
        }
      + vpc_id                 = (known after apply)
    }

Plan: 11 to add, 0 to change, 0 to destroy.

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

Note: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run "terraform apply" now.
[root@ip-172-31-45-89 manoj_terraform]#

-----------------------------------------------------------------------------------------

[root@ip-172-31-45-89 manoj_terraform]# cat ALB.tf
resource "aws_instance" "base" {
ami = "ami-0a9d27a9f4f5c0efc"
instance_type = "t2.micro"
count = 2
key_name = "test"
vpc_security_group_ids = [aws_security_group.allow_ports.id]
user_data = <<-EOT
                #! /bin/bash
                sudo su
                yum update
                yum install httpd -y
                systemctl enable httpd
                systemctl start httpd
                echo "Hello from the EC2 instance $(hostname -f)" > /var/www/html/index.html
EOT
tags = {
Name = "Target_Server{count.index}"
   }
 }

#Create elastic IPs for each instance
resource "aws_eip" "myeip" {
  count = length(aws_instance.base)
  vpc = true
  instance = "${element(aws_instance.base.*.id,count.index)}"

     tags = {
      Name = "eip-Target_Server${count.index + 1}"
   }
 }

resource "aws_default_vpc" "default" {
   tags = {
      Name = "Default VPC"
    }
  }

# create security group for ALB
resource "aws_security_group" "allow_ports" {
  name         = "alb-group"
  description  = "control inbound traffic to the application load balancer"
  vpc_id       = "${aws_default_vpc.default.id}"

  ingress {
    description = "http from VPC"
    from_port   = 80
    to_port     = 80
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }

  ingress {
    description = "TLS from VPC"
    from_port   = 443
    to_port     = 443
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }

  ingress {
    description = "outbound traffic from VPC"
    from_port   = 8080
    to_port     = 8080
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }

  egress {
    description = "Control outbound traffic to the application load balancer"
    from_port   = 0
    to_port     = 0
    protocol    = "-1"
    cidr_blocks = ["0.0.0.0/0"]
  }

  tags = {
     Name = "allow_ports"
    }
  }

data "aws_subnet_ids" "subnet" {
   vpc_id = "${aws_default_vpc.default.id}"
}

#Create target groups for ALB
resource "aws_alb_target_group" "my_target_group" {
  health_check {
    healthy_threshold   = "5"
    interval            = "20"
    protocol            = "HTTP"
    matcher             = "200"
    timeout             = "3"
    path                = "/"
    unhealthy_threshold = "2"
  }
    name = "my-test-tg"
    port = 80
    protocol = "HTTP"
    target_type = "instance"
    vpc_id = "${aws_default_vpc.default.id}"
}

#Create Application Load Balancer
resource "aws_alb" "my_aws_alb" {
  name               = "Manoj-ALB-Demo"
  internal           = false
  load_balancer_type = "application"
  security_groups    = ["${aws_security_group.allow_ports.id}"]
  subnets            = data.aws_subnet_ids.subnet.ids
  enable_deletion_protection = true
  ip_address_type    = "ipv4"

 tags = {
    Name = "Manoj-ALB-Demo"
    Environment = "Testing"
   }
 }

#Configure listeners
resource "aws_alb_listener" "my_alb_listener" {
  load_balancer_arn = aws_alb.my_aws_alb.arn
  port         = 80
  protocol     = "HTTP"
  default_action {
    target_group_arn = "${aws_alb_target_group.my_target_group.arn}"
    type             = "forward"
  }
}


resource "aws_alb_target_group_attachment" "ec2_attach" {
  count = length(aws_instance.base)
  target_group_arn = aws_alb_target_group.my_target_group.arn
  target_id = aws_instance.base[count.index].id
 }


[root@ip-172-31-45-89 manoj_terraform]#

----------------------------------------------------------------------------------------

[root@ip-172-31-45-89 manoj_terraform]# terraform apply
aws_vpc.My_VPC: Refreshing state... [id=vpc-0c440e4c3f594e85a]
aws_instance.Demo_instance: Refreshing state... [id=i-056e19670b7e443e8]
aws_internet_gateway.My_igw: Refreshing state... [id=igw-00b3fd8e4fad63924]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create
 <= read (data resources)

Terraform will perform the following actions:

  # data.aws_subnet_ids.subnet will be read during apply
  # (config refers to values not yet known)
 <= data "aws_subnet_ids" "subnet"  {
      + id     = (known after apply)
      + ids    = (known after apply)
      + tags   = (known after apply)
      + vpc_id = (known after apply)
    }

  # aws_alb.my_aws_alb will be created
  + resource "aws_alb" "my_aws_alb" {
      + arn                        = (known after apply)
      + arn_suffix                 = (known after apply)
      + dns_name                   = (known after apply)
      + drop_invalid_header_fields = false
      + enable_deletion_protection = true
      + enable_http2               = true
      + id                         = (known after apply)
      + idle_timeout               = 60
      + internal                   = false
      + ip_address_type            = "ipv4"
      + load_balancer_type         = "application"
      + name                       = "Manoj-ALB-Demo"
      + security_groups            = (known after apply)
      + subnets                    = (known after apply)
      + tags                       = {
          + "Environment" = "Testing"
          + "Name"        = "Manoj-ALB-Demo"
        }
      + tags_all                   = {
          + "Environment" = "Testing"
          + "Name"        = "Manoj-ALB-Demo"
        }
      + vpc_id                     = (known after apply)
      + zone_id                    = (known after apply)

      + subnet_mapping {
          + allocation_id        = (known after apply)
          + ipv6_address         = (known after apply)
          + outpost_id           = (known after apply)
          + private_ipv4_address = (known after apply)
          + subnet_id            = (known after apply)
        }
    }

  # aws_alb_listener.my_alb_listener will be created
  + resource "aws_alb_listener" "my_alb_listener" {
      + arn               = (known after apply)
      + id                = (known after apply)
      + load_balancer_arn = (known after apply)
      + port              = 80
      + protocol          = "HTTP"
      + ssl_policy        = (known after apply)
      + tags_all          = (known after apply)

      + default_action {
          + order            = (known after apply)
          + target_group_arn = (known after apply)
          + type             = "forward"
        }
    }

  # aws_alb_target_group.my_target_group will be created
  + resource "aws_alb_target_group" "my_target_group" {
      + arn                                = (known after apply)
      + arn_suffix                         = (known after apply)
      + deregistration_delay               = 300
      + id                                 = (known after apply)
      + lambda_multi_value_headers_enabled = false
      + load_balancing_algorithm_type      = (known after apply)
      + name                               = "my-test-tg"
      + port                               = 80
      + preserve_client_ip                 = (known after apply)
      + protocol                           = "HTTP"
      + protocol_version                   = (known after apply)
      + proxy_protocol_v2                  = false
      + slow_start                         = 0
      + tags_all                           = (known after apply)
      + target_type                        = "instance"
      + vpc_id                             = (known after apply)

      + health_check {
          + enabled             = true
          + healthy_threshold   = 5
          + interval            = 20
          + matcher             = "200"
          + path                = "/"
          + port                = "traffic-port"
          + protocol            = "HTTP"
          + timeout             = 3
          + unhealthy_threshold = 2
        }

      + stickiness {
          + cookie_duration = (known after apply)
          + enabled         = (known after apply)
          + type            = (known after apply)
        }
    }

  # aws_alb_target_group_attachment.ec2_attach[0] will be created
  + resource "aws_alb_target_group_attachment" "ec2_attach" {
      + id               = (known after apply)
      + target_group_arn = (known after apply)
      + target_id        = (known after apply)
    }

  # aws_alb_target_group_attachment.ec2_attach[1] will be created
  + resource "aws_alb_target_group_attachment" "ec2_attach" {
      + id               = (known after apply)
      + target_group_arn = (known after apply)
      + target_id        = (known after apply)
    }

  # aws_default_vpc.default will be created
  + resource "aws_default_vpc" "default" {
      + arn                              = (known after apply)
      + assign_generated_ipv6_cidr_block = (known after apply)
      + cidr_block                       = (known after apply)
      + default_network_acl_id           = (known after apply)
      + default_route_table_id           = (known after apply)
      + default_security_group_id        = (known after apply)
      + dhcp_options_id                  = (known after apply)
      + enable_classiclink               = (known after apply)
      + enable_classiclink_dns_support   = (known after apply)
      + enable_dns_hostnames             = (known after apply)
      + enable_dns_support               = true
      + id                               = (known after apply)
      + instance_tenancy                 = (known after apply)
      + ipv6_association_id              = (known after apply)
      + ipv6_cidr_block                  = (known after apply)
      + main_route_table_id              = (known after apply)
      + owner_id                         = (known after apply)
      + tags                             = {
          + "Name" = "Default VPC"
        }
      + tags_all                         = {
          + "Name" = "Default VPC"
        }
    }

  # aws_eip.myeip[0] will be created
  + resource "aws_eip" "myeip" {
      + allocation_id        = (known after apply)
      + association_id       = (known after apply)
      + carrier_ip           = (known after apply)
      + customer_owned_ip    = (known after apply)
      + domain               = (known after apply)
      + id                   = (known after apply)
      + instance             = (known after apply)
      + network_border_group = (known after apply)
      + network_interface    = (known after apply)
      + private_dns          = (known after apply)
      + private_ip           = (known after apply)
      + public_dns           = (known after apply)
      + public_ip            = (known after apply)
      + public_ipv4_pool     = (known after apply)
      + tags                 = {
          + "Name" = "eip-Target_Server1"
        }
      + tags_all             = {
          + "Name" = "eip-Target_Server1"
        }
      + vpc                  = true
    }

  # aws_eip.myeip[1] will be created
  + resource "aws_eip" "myeip" {
      + allocation_id        = (known after apply)
      + association_id       = (known after apply)
      + carrier_ip           = (known after apply)
      + customer_owned_ip    = (known after apply)
      + domain               = (known after apply)
      + id                   = (known after apply)
      + instance             = (known after apply)
      + network_border_group = (known after apply)
      + network_interface    = (known after apply)
      + private_dns          = (known after apply)
      + private_ip           = (known after apply)
      + public_dns           = (known after apply)
      + public_ip            = (known after apply)
      + public_ipv4_pool     = (known after apply)
      + tags                 = {
          + "Name" = "eip-Target_Server2"
        }
      + tags_all             = {
          + "Name" = "eip-Target_Server2"
        }
      + vpc                  = true
    }

  # aws_instance.base[0] will be created
  + resource "aws_instance" "base" {
      + ami                                  = "ami-0a9d27a9f4f5c0efc"
      + arn                                  = (known after apply)
      + associate_public_ip_address          = (known after apply)
      + availability_zone                    = (known after apply)
      + cpu_core_count                       = (known after apply)
      + cpu_threads_per_core                 = (known after apply)
      + get_password_data                    = false
      + host_id                              = (known after apply)
      + id                                   = (known after apply)
      + instance_initiated_shutdown_behavior = (known after apply)
      + instance_state                       = (known after apply)
      + instance_type                        = "t2.micro"
      + ipv6_address_count                   = (known after apply)
      + ipv6_addresses                       = (known after apply)
      + key_name                             = "test"
      + outpost_arn                          = (known after apply)
      + password_data                        = (known after apply)
      + placement_group                      = (known after apply)
      + primary_network_interface_id         = (known after apply)
      + private_dns                          = (known after apply)
      + private_ip                           = (known after apply)
      + public_dns                           = (known after apply)
      + public_ip                            = (known after apply)
      + secondary_private_ips                = (known after apply)
      + security_groups                      = (known after apply)
      + source_dest_check                    = true
      + subnet_id                            = (known after apply)
      + tags                                 = {
          + "Name" = "Target_Server{count.index}"
        }
      + tags_all                             = {
          + "Name" = "Target_Server{count.index}"
        }
      + tenancy                              = (known after apply)
      + user_data                            = "e6a3e078524f41a332ae44be48b53e8fc452c8b9"
      + vpc_security_group_ids               = (known after apply)

      + ebs_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + snapshot_id           = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }

      + enclave_options {
          + enabled = (known after apply)
        }

      + ephemeral_block_device {
          + device_name  = (known after apply)
          + no_device    = (known after apply)
          + virtual_name = (known after apply)
        }

      + metadata_options {
          + http_endpoint               = (known after apply)
          + http_put_response_hop_limit = (known after apply)
          + http_tokens                 = (known after apply)
        }

      + network_interface {
          + delete_on_termination = (known after apply)
          + device_index          = (known after apply)
          + network_interface_id  = (known after apply)
        }

      + root_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }
    }

  # aws_instance.base[1] will be created
  + resource "aws_instance" "base" {
      + ami                                  = "ami-0a9d27a9f4f5c0efc"
      + arn                                  = (known after apply)
      + associate_public_ip_address          = (known after apply)
      + availability_zone                    = (known after apply)
      + cpu_core_count                       = (known after apply)
      + cpu_threads_per_core                 = (known after apply)
      + get_password_data                    = false
      + host_id                              = (known after apply)
      + id                                   = (known after apply)
      + instance_initiated_shutdown_behavior = (known after apply)
      + instance_state                       = (known after apply)
      + instance_type                        = "t2.micro"
      + ipv6_address_count                   = (known after apply)
      + ipv6_addresses                       = (known after apply)
      + key_name                             = "test"
      + outpost_arn                          = (known after apply)
      + password_data                        = (known after apply)
      + placement_group                      = (known after apply)
      + primary_network_interface_id         = (known after apply)
      + private_dns                          = (known after apply)
      + private_ip                           = (known after apply)
      + public_dns                           = (known after apply)
      + public_ip                            = (known after apply)
      + secondary_private_ips                = (known after apply)
      + security_groups                      = (known after apply)
      + source_dest_check                    = true
      + subnet_id                            = (known after apply)
      + tags                                 = {
          + "Name" = "Target_Server{count.index}"
        }
      + tags_all                             = {
          + "Name" = "Target_Server{count.index}"
        }
      + tenancy                              = (known after apply)
      + user_data                            = "e6a3e078524f41a332ae44be48b53e8fc452c8b9"
      + vpc_security_group_ids               = (known after apply)

      + ebs_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + snapshot_id           = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }

      + enclave_options {
          + enabled = (known after apply)
        }

      + ephemeral_block_device {
          + device_name  = (known after apply)
          + no_device    = (known after apply)
          + virtual_name = (known after apply)
        }

      + metadata_options {
          + http_endpoint               = (known after apply)
          + http_put_response_hop_limit = (known after apply)
          + http_tokens                 = (known after apply)
        }

      + network_interface {
          + delete_on_termination = (known after apply)
          + device_index          = (known after apply)
          + network_interface_id  = (known after apply)
        }

      + root_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }
    }

  # aws_security_group.allow_ports will be created
  + resource "aws_security_group" "allow_ports" {
      + arn                    = (known after apply)
      + description            = "control inbound traffic to the application load balancer"
      + egress                 = [
          + {
              + cidr_blocks      = [
                  + "0.0.0.0/0",
                ]
              + description      = "Control outbound traffic to the application load balancer"
              + from_port        = 0
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "-1"
              + security_groups  = []
              + self             = false
              + to_port          = 0
            },
        ]
      + id                     = (known after apply)
      + ingress                = [
          + {
              + cidr_blocks      = [
                  + "0.0.0.0/0",
                ]
              + description      = "TLS from VPC"
              + from_port        = 443
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "tcp"
              + security_groups  = []
              + self             = false
              + to_port          = 443
            },
          + {
              + cidr_blocks      = [
                  + "0.0.0.0/0",
                ]
              + description      = "http from VPC"
              + from_port        = 80
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "tcp"
              + security_groups  = []
              + self             = false
              + to_port          = 80
            },
          + {
              + cidr_blocks      = [
                  + "0.0.0.0/0",
                ]
              + description      = "outbound traffic from VPC"
              + from_port        = 8080
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "tcp"
              + security_groups  = []
              + self             = false
              + to_port          = 8080
            },
        ]
      + name                   = "alb-group"
      + name_prefix            = (known after apply)
      + owner_id               = (known after apply)
      + revoke_rules_on_delete = false
      + tags                   = {
          + "Name" = "allow_ports"
        }
      + tags_all               = {
          + "Name" = "allow_ports"
        }
      + vpc_id                 = (known after apply)
    }

Plan: 11 to add, 0 to change, 0 to destroy.

Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.

  Enter a value: yes

aws_default_vpc.default: Creating...
aws_default_vpc.default: Still creating... [10s elapsed]
aws_default_vpc.default: Creation complete after 11s [id=vpc-fdb95b96]
data.aws_subnet_ids.subnet: Reading...
aws_alb_target_group.my_target_group: Creating...
aws_security_group.allow_ports: Creating...
data.aws_subnet_ids.subnet: Read complete after 0s [id=vpc-fdb95b96]
aws_alb_target_group.my_target_group: Creation complete after 0s [id=arn:aws:elasticloadbalancing:ap-south-1:395162570454:targetgroup/my-test-tg/018909704458f65b]
aws_security_group.allow_ports: Creation complete after 1s [id=sg-02387d112faf76e9b]
aws_instance.base[0]: Creating...
aws_instance.base[1]: Creating...
aws_alb.my_aws_alb: Creating...
aws_instance.base[0]: Still creating... [10s elapsed]
aws_alb.my_aws_alb: Still creating... [10s elapsed]
aws_instance.base[1]: Still creating... [10s elapsed]
aws_instance.base[0]: Still creating... [20s elapsed]
aws_instance.base[1]: Still creating... [20s elapsed]
aws_alb.my_aws_alb: Still creating... [20s elapsed]
aws_instance.base[1]: Creation complete after 21s [id=i-0629c72890dafd1dc]
aws_instance.base[0]: Creation complete after 21s [id=i-0a770864a37a7a929]
aws_alb_target_group_attachment.ec2_attach[1]: Creating...
aws_eip.myeip[1]: Creating...
aws_alb_target_group_attachment.ec2_attach[0]: Creating...
aws_eip.myeip[0]: Creating...
aws_alb_target_group_attachment.ec2_attach[1]: Creation complete after 0s [id=arn:aws:elasticloadbalancing:ap-south-1:395162570454:targetgroup/my-test-tg/018909704458f65b-20210516182629939700000001]
aws_alb_target_group_attachment.ec2_attach[0]: Creation complete after 0s [id=arn:aws:elasticloadbalancing:ap-south-1:395162570454:targetgroup/my-test-tg/018909704458f65b-20210516182629985800000002]
aws_eip.myeip[1]: Creation complete after 1s [id=eipalloc-042e7d4a24b5a24fc]
aws_eip.myeip[0]: Creation complete after 1s [id=eipalloc-0b045db1068c7a0a1]
aws_alb.my_aws_alb: Still creating... [30s elapsed]
aws_alb.my_aws_alb: Still creating... [40s elapsed]
aws_alb.my_aws_alb: Still creating... [50s elapsed]
aws_alb.my_aws_alb: Still creating... [1m0s elapsed]
aws_alb.my_aws_alb: Still creating... [1m10s elapsed]
aws_alb.my_aws_alb: Still creating... [1m20s elapsed]
aws_alb.my_aws_alb: Still creating... [1m30s elapsed]
aws_alb.my_aws_alb: Still creating... [1m40s elapsed]
aws_alb.my_aws_alb: Still creating... [1m50s elapsed]
aws_alb.my_aws_alb: Still creating... [2m0s elapsed]
aws_alb.my_aws_alb: Creation complete after 2m2s [id=arn:aws:elasticloadbalancing:ap-south-1:395162570454:loadbalancer/app/Manoj-ALB-Demo/906a062f9d1d0d01]
aws_alb_listener.my_alb_listener: Creating...
aws_alb_listener.my_alb_listener: Creation complete after 0s [id=arn:aws:elasticloadbalancing:ap-south-1:395162570454:listener/app/Manoj-ALB-Demo/906a062f9d1d0d01/5300697f5639de12]

Apply complete! Resources: 11 added, 0 changed, 0 destroyed.
[root@ip-172-31-45-89 manoj_terraform]#

----------------------------------------------------------------------------------------------------------------------------

[root@ip-172-31-45-89 manoj_terraform]# terraform plan
aws_vpc.My_VPC: Refreshing state... [id=vpc-0c440e4c3f594e85a]
aws_instance.Demo_instance: Refreshing state... [id=i-056e19670b7e443e8]
aws_default_vpc.default: Refreshing state... [id=vpc-fdb95b96]
aws_internet_gateway.My_igw: Refreshing state... [id=igw-00b3fd8e4fad63924]
aws_alb_target_group.my_target_group: Refreshing state... [id=arn:aws:elasticloadbalancing:ap-south-1:395162570454:targetgroup/my-test-tg/018909704458f65b]
aws_security_group.allow_ports: Refreshing state... [id=sg-02387d112faf76e9b]
aws_instance.base[0]: Refreshing state... [id=i-0a770864a37a7a929]
aws_instance.base[1]: Refreshing state... [id=i-0629c72890dafd1dc]
aws_alb.my_aws_alb: Refreshing state... [id=arn:aws:elasticloadbalancing:ap-south-1:395162570454:loadbalancer/app/Manoj-ALB-Demo/906a062f9d1d0d01]
aws_alb_listener.my_alb_listener: Refreshing state... [id=arn:aws:elasticloadbalancing:ap-south-1:395162570454:listener/app/Manoj-ALB-Demo/906a062f9d1d0d01/5300697f5639de12]
aws_eip.myeip[0]: Refreshing state... [id=eipalloc-0b045db1068c7a0a1]
aws_eip.myeip[1]: Refreshing state... [id=eipalloc-042e7d4a24b5a24fc]
aws_alb_target_group_attachment.ec2_attach[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:ap-south-1:395162570454:targetgroup/my-test-tg/018909704458f65b-20210516182629985800000002]
aws_alb_target_group_attachment.ec2_attach[1]: Refreshing state... [id=arn:aws:elasticloadbalancing:ap-south-1:395162570454:targetgroup/my-test-tg/018909704458f65b-20210516182629939700000001]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create
  ~ update in-place
  - destroy

Terraform will perform the following actions:

  # aws_alb.my_aws_alb will be created
  + resource "aws_alb" "my_aws_alb" {
      + arn                        = (known after apply)
      + arn_suffix                 = (known after apply)
      + dns_name                   = (known after apply)
      + drop_invalid_header_fields = false
      + enable_deletion_protection = true
      + enable_http2               = true
      + id                         = (known after apply)
      + idle_timeout               = 60
      + internal                   = false
      + ip_address_type            = "ipv4"
      + load_balancer_type         = "application"
      + name                       = "Manoj-ALB-Demo"
      + security_groups            = (known after apply)
      + subnets                    = [
          + "subnet-07bdc44b",
          + "subnet-0faaa267",
          + "subnet-7a971401",
        ]
      + tags                       = {
          + "Environment" = "Testing"
          + "Name"        = "Manoj-ALB-Demo"
        }
      + tags_all                   = {
          + "Environment" = "Testing"
          + "Name"        = "Manoj-ALB-Demo"
        }
      + vpc_id                     = (known after apply)
      + zone_id                    = (known after apply)

      + subnet_mapping {
          + allocation_id        = (known after apply)
          + ipv6_address         = (known after apply)
          + outpost_id           = (known after apply)
          + private_ipv4_address = (known after apply)
          + subnet_id            = (known after apply)
        }
    }

  # aws_alb_listener.my_alb_listener will be created
  + resource "aws_alb_listener" "my_alb_listener" {
      + arn               = (known after apply)
      + id                = (known after apply)
      + load_balancer_arn = (known after apply)
      + port              = 80
      + protocol          = "HTTP"
      + ssl_policy        = (known after apply)
      + tags_all          = (known after apply)

      + default_action {
          + order            = (known after apply)
          + target_group_arn = (known after apply)
          + type             = "forward"
        }
    }

  # aws_alb_target_group.my_target_group will be created
  + resource "aws_alb_target_group" "my_target_group" {
      + arn                                = (known after apply)
      + arn_suffix                         = (known after apply)
      + deregistration_delay               = 300
      + id                                 = (known after apply)
      + lambda_multi_value_headers_enabled = false
      + load_balancing_algorithm_type      = (known after apply)
      + name                               = "my-test-tg"
      + port                               = 80
      + preserve_client_ip                 = (known after apply)
      + protocol                           = "HTTP"
      + protocol_version                   = (known after apply)
      + proxy_protocol_v2                  = false
      + slow_start                         = 0
      + tags_all                           = (known after apply)
      + target_type                        = "instance"
      + vpc_id                             = "vpc-fdb95b96"

      + health_check {
          + enabled             = true
          + healthy_threshold   = 5
          + interval            = 20
          + matcher             = "200"
          + path                = "/"
          + port                = "traffic-port"
          + protocol            = "HTTP"
          + timeout             = 3
          + unhealthy_threshold = 2
        }

      + stickiness {
          + cookie_duration = (known after apply)
          + enabled         = (known after apply)
          + type            = (known after apply)
        }
    }

  # aws_alb_target_group_attachment.ec2_attach[0] will be created
  + resource "aws_alb_target_group_attachment" "ec2_attach" {
      + id               = (known after apply)
      + target_group_arn = (known after apply)
      + target_id        = (known after apply)
    }

  # aws_alb_target_group_attachment.ec2_attach[1] will be created
  + resource "aws_alb_target_group_attachment" "ec2_attach" {
      + id               = (known after apply)
      + target_group_arn = (known after apply)
      + target_id        = (known after apply)
    }

  # aws_autoscaling_group.web will be created
  + resource "aws_autoscaling_group" "web" {
      + arn                       = (known after apply)
      + availability_zones        = (known after apply)
      + default_cooldown          = (known after apply)
      + desired_capacity          = 2
      + enabled_metrics           = [
          + "GroupDesiredCapacity",
          + "GroupInServiceInstances",
          + "GroupMaxSize",
          + "GroupMinSize",
          + "GroupTotalInstances",
        ]
      + force_delete              = false
      + force_delete_warm_pool    = false
      + health_check_grace_period = 300
      + health_check_type         = "EC2"
      + id                        = (known after apply)
      + launch_configuration      = (known after apply)
      + max_size                  = 4
      + metrics_granularity       = "1Minute"
      + min_size                  = 1
      + name                      = (known after apply)
      + protect_from_scale_in     = false
      + service_linked_role_arn   = (known after apply)
      + vpc_zone_identifier       = (known after apply)
      + wait_for_capacity_timeout = "10m"

      + tag {
          + key                 = "Name"
          + propagate_at_launch = true
          + value               = "web"
        }
    }

  # aws_autoscaling_policy.web_policy_down will be created
  + resource "aws_autoscaling_policy" "web_policy_down" {
      + adjustment_type         = "ChangeInCapacity"
      + arn                     = (known after apply)
      + autoscaling_group_name  = (known after apply)
      + cooldown                = 300
      + id                      = (known after apply)
      + metric_aggregation_type = (known after apply)
      + name                    = "web_policy_down"
      + policy_type             = "SimpleScaling"
      + scaling_adjustment      = -1
    }

  # aws_autoscaling_policy.web_policy_up will be created
  + resource "aws_autoscaling_policy" "web_policy_up" {
      + adjustment_type         = "ChangeInCapacity"
      + arn                     = (known after apply)
      + autoscaling_group_name  = (known after apply)
      + cooldown                = 300
      + id                      = (known after apply)
      + metric_aggregation_type = (known after apply)
      + name                    = "web_policy_up"
      + policy_type             = "SimpleScaling"
      + scaling_adjustment      = 1
    }

  # aws_cloudwatch_metric_alarm.web_cpu_alarm_down will be created
  + resource "aws_cloudwatch_metric_alarm" "web_cpu_alarm_down" {
      + actions_enabled                       = true
      + alarm_actions                         = (known after apply)
      + alarm_description                     = "This metric monitor EC2 instance CPU utilization"
      + alarm_name                            = "web_cpu_alarm_down"
      + arn                                   = (known after apply)
      + comparison_operator                   = "LessThanOrEqualToThreshold"
      + dimensions                            = (known after apply)
      + evaluate_low_sample_count_percentiles = (known after apply)
      + evaluation_periods                    = 2
      + id                                    = (known after apply)
      + metric_name                           = "CPUUtilization"
      + namespace                             = "AWS/EC2"
      + period                                = 120
      + statistic                             = "Average"
      + tags_all                              = (known after apply)
      + threshold                             = 10
      + treat_missing_data                    = "missing"
    }

  # aws_cloudwatch_metric_alarm.web_cpu_alarm_up will be created
  + resource "aws_cloudwatch_metric_alarm" "web_cpu_alarm_up" {
      + actions_enabled                       = true
      + alarm_actions                         = (known after apply)
      + alarm_description                     = "This metric monitor EC2 instance CPU utilization"
      + alarm_name                            = "web_cpu_alarm_up"
      + arn                                   = (known after apply)
      + comparison_operator                   = "GreaterThanOrEqualToThreshold"
      + dimensions                            = (known after apply)
      + evaluate_low_sample_count_percentiles = (known after apply)
      + evaluation_periods                    = 2
      + id                                    = (known after apply)
      + metric_name                           = "CPUUtilization"
      + namespace                             = "AWS/EC2"
      + period                                = 120
      + statistic                             = "Average"
      + tags_all                              = (known after apply)
      + threshold                             = 60
      + treat_missing_data                    = "missing"
    }

  # aws_eip.myeip[0] will be updated in-place
  ~ resource "aws_eip" "myeip" {
        id                   = "eipalloc-0b045db1068c7a0a1"
      + instance             = (known after apply)
        tags                 = {
            "Name" = "eip-Target_Server1"
        }
        # (8 unchanged attributes hidden)
    }

  # aws_eip.myeip[1] will be updated in-place
  ~ resource "aws_eip" "myeip" {
        id                   = "eipalloc-042e7d4a24b5a24fc"
      + instance             = (known after apply)
        tags                 = {
            "Name" = "eip-Target_Server2"
        }
        # (8 unchanged attributes hidden)
    }

  # aws_instance.base[0] will be created
  + resource "aws_instance" "base" {
      + ami                                  = "ami-0a9d27a9f4f5c0efc"
      + arn                                  = (known after apply)
      + associate_public_ip_address          = (known after apply)
      + availability_zone                    = (known after apply)
      + cpu_core_count                       = (known after apply)
      + cpu_threads_per_core                 = (known after apply)
      + get_password_data                    = false
      + host_id                              = (known after apply)
      + id                                   = (known after apply)
      + instance_initiated_shutdown_behavior = (known after apply)
      + instance_state                       = (known after apply)
      + instance_type                        = "t2.micro"
      + ipv6_address_count                   = (known after apply)
      + ipv6_addresses                       = (known after apply)
      + key_name                             = "test"
      + outpost_arn                          = (known after apply)
      + password_data                        = (known after apply)
      + placement_group                      = (known after apply)
      + primary_network_interface_id         = (known after apply)
      + private_dns                          = (known after apply)
      + private_ip                           = (known after apply)
      + public_dns                           = (known after apply)
      + public_ip                            = (known after apply)
      + secondary_private_ips                = (known after apply)
      + security_groups                      = (known after apply)
      + source_dest_check                    = true
      + subnet_id                            = (known after apply)
      + tags                                 = {
          + "Name" = "Target_Server{count.index}"
        }
      + tags_all                             = {
          + "Name" = "Target_Server{count.index}"
        }
      + tenancy                              = (known after apply)
      + user_data                            = "e6a3e078524f41a332ae44be48b53e8fc452c8b9"
      + vpc_security_group_ids               = (known after apply)

      + ebs_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + snapshot_id           = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }

      + enclave_options {
          + enabled = (known after apply)
        }

      + ephemeral_block_device {
          + device_name  = (known after apply)
          + no_device    = (known after apply)
          + virtual_name = (known after apply)
        }

      + metadata_options {
          + http_endpoint               = (known after apply)
          + http_put_response_hop_limit = (known after apply)
          + http_tokens                 = (known after apply)
        }

      + network_interface {
          + delete_on_termination = (known after apply)
          + device_index          = (known after apply)
          + network_interface_id  = (known after apply)
        }

      + root_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }
    }

  # aws_instance.base[1] will be created
  + resource "aws_instance" "base" {
      + ami                                  = "ami-0a9d27a9f4f5c0efc"
      + arn                                  = (known after apply)
      + associate_public_ip_address          = (known after apply)
      + availability_zone                    = (known after apply)
      + cpu_core_count                       = (known after apply)
      + cpu_threads_per_core                 = (known after apply)
      + get_password_data                    = false
      + host_id                              = (known after apply)
      + id                                   = (known after apply)
      + instance_initiated_shutdown_behavior = (known after apply)
      + instance_state                       = (known after apply)
      + instance_type                        = "t2.micro"
      + ipv6_address_count                   = (known after apply)
      + ipv6_addresses                       = (known after apply)
      + key_name                             = "test"
      + outpost_arn                          = (known after apply)
      + password_data                        = (known after apply)
      + placement_group                      = (known after apply)
      + primary_network_interface_id         = (known after apply)
      + private_dns                          = (known after apply)
      + private_ip                           = (known after apply)
      + public_dns                           = (known after apply)
      + public_ip                            = (known after apply)
      + secondary_private_ips                = (known after apply)
      + security_groups                      = (known after apply)
      + source_dest_check                    = true
      + subnet_id                            = (known after apply)
      + tags                                 = {
          + "Name" = "Target_Server{count.index}"
        }
      + tags_all                             = {
          + "Name" = "Target_Server{count.index}"
        }
      + tenancy                              = (known after apply)
      + user_data                            = "e6a3e078524f41a332ae44be48b53e8fc452c8b9"
      + vpc_security_group_ids               = (known after apply)

      + ebs_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + snapshot_id           = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }

      + enclave_options {
          + enabled = (known after apply)
        }

      + ephemeral_block_device {
          + device_name  = (known after apply)
          + no_device    = (known after apply)
          + virtual_name = (known after apply)
        }

      + metadata_options {
          + http_endpoint               = (known after apply)
          + http_put_response_hop_limit = (known after apply)
          + http_tokens                 = (known after apply)
        }

      + network_interface {
          + delete_on_termination = (known after apply)
          + device_index          = (known after apply)
          + network_interface_id  = (known after apply)
        }

      + root_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }
    }

  # aws_internet_gateway.My_igw will be destroyed
  - resource "aws_internet_gateway" "My_igw" {
      - arn      = "arn:aws:ec2:ap-south-1:395162570454:internet-gateway/igw-00b3fd8e4fad63924" -> null
      - id       = "igw-00b3fd8e4fad63924" -> null
      - owner_id = "395162570454" -> null
      - tags     = {
          - "Name" = "demo_igw"
        } -> null
      - tags_all = {
          - "Name" = "demo_igw"
        } -> null
      - vpc_id   = "vpc-0c440e4c3f594e85a" -> null
    }

  # aws_internet_gateway.my_igw will be created
  + resource "aws_internet_gateway" "my_igw" {
      + arn      = (known after apply)
      + id       = (known after apply)
      + owner_id = (known after apply)
      + tags     = {
          + "Name" = "demo_igw"
        }
      + tags_all = {
          + "Name" = "demo_igw"
        }
      + vpc_id   = (known after apply)
    }

  # aws_launch_configuration.web will be created
  + resource "aws_launch_configuration" "web" {
      + arn                         = (known after apply)
      + associate_public_ip_address = true
      + ebs_optimized               = (known after apply)
      + enable_monitoring           = true
      + id                          = (known after apply)
      + image_id                    = "ami-0a9d27a9f4f5c0efc"
      + instance_type               = "t2.micro"
      + key_name                    = "test"
      + name                        = (known after apply)
      + security_groups             = (known after apply)
      + user_data                   = "4aac886b82872637b6fc233adfbe59b9704bf8d1"

      + ebs_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + no_device             = (known after apply)
          + snapshot_id           = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }

      + metadata_options {
          + http_endpoint               = (known after apply)
          + http_put_response_hop_limit = (known after apply)
          + http_tokens                 = (known after apply)
        }

      + root_block_device {
          + delete_on_termination = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }
    }

  # aws_route_table.my_vpc_public will be created
  + resource "aws_route_table" "my_vpc_public" {
      + arn              = (known after apply)
      + id               = (known after apply)
      + owner_id         = (known after apply)
      + propagating_vgws = (known after apply)
      + route            = [
          + {
              + carrier_gateway_id         = ""
              + cidr_block                 = "0.0.0.0/0"
              + destination_prefix_list_id = ""
              + egress_only_gateway_id     = ""
              + gateway_id                 = (known after apply)
              + instance_id                = ""
              + ipv6_cidr_block            = ""
              + local_gateway_id           = ""
              + nat_gateway_id             = ""
              + network_interface_id       = ""
              + transit_gateway_id         = ""
              + vpc_endpoint_id            = ""
              + vpc_peering_connection_id  = ""
            },
        ]
      + tags             = {
          + "Name" = "Public Subnets Route Table for My VPC"
        }
      + tags_all         = {
          + "Name" = "Public Subnets Route Table for My VPC"
        }
      + vpc_id           = (known after apply)
    }

  # aws_route_table_association.my_vpc_ap-south-1a_public will be created
  + resource "aws_route_table_association" "my_vpc_ap-south-1a_public" {
      + id             = (known after apply)
      + route_table_id = (known after apply)
      + subnet_id      = (known after apply)
    }

  # aws_route_table_association.my_vpc_ap-south-1b_public will be created
  + resource "aws_route_table_association" "my_vpc_ap-south-1b_public" {
      + id             = (known after apply)
      + route_table_id = (known after apply)
      + subnet_id      = (known after apply)
    }

  # aws_route_table_association.my_vpc_ap-south-1c_public will be created
  + resource "aws_route_table_association" "my_vpc_ap-south-1c_public" {
      + id             = (known after apply)
      + route_table_id = (known after apply)
      + subnet_id      = (known after apply)
    }

  # aws_security_group.allow_http will be created
  + resource "aws_security_group" "allow_http" {
      + arn                    = (known after apply)
      + description            = "Allow HTTP inbound connections"
      + egress                 = [
          + {
              + cidr_blocks      = [
                  + "0.0.0.0/0",
                ]
              + description      = ""
              + from_port        = 0
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "-1"
              + security_groups  = []
              + self             = false
              + to_port          = 0
            },
        ]
      + id                     = (known after apply)
      + ingress                = [
          + {
              + cidr_blocks      = [
                  + "0.0.0.0/0",
                ]
              + description      = ""
              + from_port        = 80
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "tcp"
              + security_groups  = []
              + self             = false
              + to_port          = 80
            },
        ]
      + name                   = "allow_http"
      + name_prefix            = (known after apply)
      + owner_id               = (known after apply)
      + revoke_rules_on_delete = false
      + tags                   = {
          + "Name" = "Allow HTTP Security Group"
        }
      + tags_all               = {
          + "Name" = "Allow HTTP Security Group"
        }
      + vpc_id                 = (known after apply)
    }

  # aws_security_group.allow_ports will be created
  + resource "aws_security_group" "allow_ports" {
      + arn                    = (known after apply)
      + description            = "control inbound traffic to the application load balancer"
      + egress                 = [
          + {
              + cidr_blocks      = [
                  + "0.0.0.0/0",
                ]
              + description      = "Control outbound traffic to the application load balancer"
              + from_port        = 0
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "-1"
              + security_groups  = []
              + self             = false
              + to_port          = 0
            },
        ]
      + id                     = (known after apply)
      + ingress                = [
          + {
              + cidr_blocks      = [
                  + "0.0.0.0/0",
                ]
              + description      = "TLS from VPC"
              + from_port        = 443
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "tcp"
              + security_groups  = []
              + self             = false
              + to_port          = 443
            },
          + {
              + cidr_blocks      = [
                  + "0.0.0.0/0",
                ]
              + description      = "http from VPC"
              + from_port        = 80
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "tcp"
              + security_groups  = []
              + self             = false
              + to_port          = 80
            },
          + {
              + cidr_blocks      = [
                  + "0.0.0.0/0",
                ]
              + description      = "outbound traffic from VPC"
              + from_port        = 8080
              + ipv6_cidr_blocks = []
              + prefix_list_ids  = []
              + protocol         = "tcp"
              + security_groups  = []
              + self             = false
              + to_port          = 8080
            },
        ]
      + name                   = "alb-group"
      + name_prefix            = (known after apply)
      + owner_id               = (known after apply)
      + revoke_rules_on_delete = false
      + tags                   = {
          + "Name" = "allow_ports"
        }
      + tags_all               = {
          + "Name" = "allow_ports"
        }
      + vpc_id                 = "vpc-fdb95b96"
    }

  # aws_subnet.public_ap-south-1a will be created
  + resource "aws_subnet" "public_ap-south-1a" {
      + arn                             = (known after apply)
      + assign_ipv6_address_on_creation = false
      + availability_zone               = "ap-south-1a"
      + availability_zone_id            = (known after apply)
      + cidr_block                      = "10.0.0.0/24"
      + id                              = (known after apply)
      + ipv6_cidr_block_association_id  = (known after apply)
      + map_public_ip_on_launch         = false
      + owner_id                        = (known after apply)
      + tags                            = {
          + "Name" = "Public Subnet ap-south-1a"
        }
      + tags_all                        = {
          + "Name" = "Public Subnet ap-south-1a"
        }
      + vpc_id                          = (known after apply)
    }

  # aws_subnet.public_ap-south-1b will be created
  + resource "aws_subnet" "public_ap-south-1b" {
      + arn                             = (known after apply)
      + assign_ipv6_address_on_creation = false
      + availability_zone               = "ap-south-1b"
      + availability_zone_id            = (known after apply)
      + cidr_block                      = "10.0.1.0/24"
      + id                              = (known after apply)
      + ipv6_cidr_block_association_id  = (known after apply)
      + map_public_ip_on_launch         = false
      + owner_id                        = (known after apply)
      + tags                            = {
          + "Name" = "Public Subnet ap-south-1b"
        }
      + tags_all                        = {
          + "Name" = "Public Subnet ap-south-1b"
        }
      + vpc_id                          = (known after apply)
    }

  # aws_subnet.public_ap-south-1c will be created
  + resource "aws_subnet" "public_ap-south-1c" {
      + arn                             = (known after apply)
      + assign_ipv6_address_on_creation = false
      + availability_zone               = "ap-south-1c"
      + availability_zone_id            = (known after apply)
      + cidr_block                      = "10.0.1.0/24"
      + id                              = (known after apply)
      + ipv6_cidr_block_association_id  = (known after apply)
      + map_public_ip_on_launch         = false
      + owner_id                        = (known after apply)
      + tags                            = {
          + "Name" = "Public Subnet ap-south-1c"
        }
      + tags_all                        = {
          + "Name" = "Public Subnet ap-south-1c"
        }
      + vpc_id                          = (known after apply)
    }

  # aws_vpc.My_VPC will be destroyed
  - resource "aws_vpc" "My_VPC" {
      - arn                              = "arn:aws:ec2:ap-south-1:395162570454:vpc/vpc-0c440e4c3f594e85a" -> null
      - assign_generated_ipv6_cidr_block = false -> null
      - cidr_block                       = "10.0.0.0/16" -> null
      - default_network_acl_id           = "acl-073acc3ef2af6ccc3" -> null
      - default_route_table_id           = "rtb-0046f0c89de1691b0" -> null
      - default_security_group_id        = "sg-005fd51d57fa759b1" -> null
      - dhcp_options_id                  = "dopt-8fa46de4" -> null
      - enable_dns_hostnames             = true -> null
      - enable_dns_support               = true -> null
      - id                               = "vpc-0c440e4c3f594e85a" -> null
      - instance_tenancy                 = "default" -> null
      - main_route_table_id              = "rtb-0046f0c89de1691b0" -> null
      - owner_id                         = "395162570454" -> null
      - tags                             = {
          - "Name" = "Demo_VPC"
        } -> null
      - tags_all                         = {
          - "Name" = "Demo_VPC"
        } -> null
    }

  # aws_vpc.my_vpc will be created
  + resource "aws_vpc" "my_vpc" {
      + arn                              = (known after apply)
      + assign_generated_ipv6_cidr_block = false
      + cidr_block                       = "10.0.0.0/16"
      + default_network_acl_id           = (known after apply)
      + default_route_table_id           = (known after apply)
      + default_security_group_id        = (known after apply)
      + dhcp_options_id                  = (known after apply)
      + enable_classiclink               = (known after apply)
      + enable_classiclink_dns_support   = (known after apply)
      + enable_dns_hostnames             = true
      + enable_dns_support               = true
      + id                               = (known after apply)
      + instance_tenancy                 = "default"
      + ipv6_association_id              = (known after apply)
      + ipv6_cidr_block                  = (known after apply)
      + main_route_table_id              = (known after apply)
      + owner_id                         = (known after apply)
      + tags                             = {
          + "Name" = "Demo_VPC"
        }
      + tags_all                         = {
          + "Name" = "Demo_VPC"
        }
    }

Plan: 24 to add, 2 to change, 2 to destroy.

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

Note: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run "terraform apply" now.

-----------------------------------------------------------

[root@ip-172-31-45-89 manoj_terraform]# terraform apply
aws_vpc.my_vpc: Refreshing state... [id=vpc-0e4bc3461cb0b71c4]
aws_instance.Demo_instance: Refreshing state... [id=i-056e19670b7e443e8]
aws_subnet.public_ap-south-1a: Refreshing state... [id=subnet-0aacc7fbbf0211ca1]
aws_subnet.public_ap-south-1b: Refreshing state... [id=subnet-017c1771130c62093]
aws_internet_gateway.my_igw: Refreshing state... [id=igw-0b49f7eb97e689247]
aws_security_group.allow_http: Refreshing state... [id=sg-02467971f68b1288f]
aws_launch_configuration.web: Refreshing state... [id=terraform-20210517130615957300000001]
aws_route_table.my_vpc_public: Refreshing state... [id=rtb-0e5cc5557238ea39f]
aws_route_table_association.my_vpc_ap-south-1a_public: Refreshing state... [id=rtbassoc-0af25acd6f4bce194]
aws_route_table_association.my_vpc_ap-south-1b_public: Refreshing state... [id=rtbassoc-0e6408e0f0c889a45]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # aws_autoscaling_group.web will be created
  + resource "aws_autoscaling_group" "web" {
      + arn                       = (known after apply)
      + availability_zones        = (known after apply)
      + default_cooldown          = (known after apply)
      + desired_capacity          = 2
      + enabled_metrics           = [
          + "GroupDesiredCapacity",
          + "GroupInServiceInstances",
          + "GroupMaxSize",
          + "GroupMinSize",
          + "GroupTotalInstances",
        ]
      + force_delete              = false
      + force_delete_warm_pool    = false
      + health_check_grace_period = 300
      + health_check_type         = "EC2"
      + id                        = (known after apply)
      + launch_configuration      = "terraform-20210517130615957300000001"
      + max_size                  = 4
      + metrics_granularity       = "1Minute"
      + min_size                  = 1
      + name                      = "terraform-20210517130615957300000001-asg"
      + protect_from_scale_in     = false
      + service_linked_role_arn   = (known after apply)
      + vpc_zone_identifier       = (known after apply)
      + wait_for_capacity_timeout = "10m"

      + tag {
          + key                 = "Name"
          + propagate_at_launch = true
          + value               = "web"
        }
    }

  # aws_autoscaling_policy.web_policy_down will be created
  + resource "aws_autoscaling_policy" "web_policy_down" {
      + adjustment_type         = "ChangeInCapacity"
      + arn                     = (known after apply)
      + autoscaling_group_name  = "terraform-20210517130615957300000001-asg"
      + cooldown                = 300
      + id                      = (known after apply)
      + metric_aggregation_type = (known after apply)
      + name                    = "web_policy_down"
      + policy_type             = "SimpleScaling"
      + scaling_adjustment      = -1
    }

  # aws_autoscaling_policy.web_policy_up will be created
  + resource "aws_autoscaling_policy" "web_policy_up" {
      + adjustment_type         = "ChangeInCapacity"
      + arn                     = (known after apply)
      + autoscaling_group_name  = "terraform-20210517130615957300000001-asg"
      + cooldown                = 300
      + id                      = (known after apply)
      + metric_aggregation_type = (known after apply)
      + name                    = "web_policy_up"
      + policy_type             = "SimpleScaling"
      + scaling_adjustment      = 1
    }

  # aws_cloudwatch_metric_alarm.web_cpu_alarm_down will be created
  + resource "aws_cloudwatch_metric_alarm" "web_cpu_alarm_down" {
      + actions_enabled                       = true
      + alarm_actions                         = (known after apply)
      + alarm_description                     = "This metric monitor EC2 instance CPU utilization"
      + alarm_name                            = "web_cpu_alarm_down"
      + arn                                   = (known after apply)
      + comparison_operator                   = "LessThanOrEqualToThreshold"
      + dimensions                            = {
          + "AutoScalingGroupName" = "terraform-20210517130615957300000001-asg"
        }
      + evaluate_low_sample_count_percentiles = (known after apply)
      + evaluation_periods                    = 2
      + id                                    = (known after apply)
      + metric_name                           = "CPUUtilization"
      + namespace                             = "AWS/EC2"
      + period                                = 120
      + statistic                             = "Average"
      + tags_all                              = (known after apply)
      + threshold                             = 10
      + treat_missing_data                    = "missing"
    }

  # aws_cloudwatch_metric_alarm.web_cpu_alarm_up will be created
  + resource "aws_cloudwatch_metric_alarm" "web_cpu_alarm_up" {
      + actions_enabled                       = true
      + alarm_actions                         = (known after apply)
      + alarm_description                     = "This metric monitor EC2 instance CPU utilization"
      + alarm_name                            = "web_cpu_alarm_up"
      + arn                                   = (known after apply)
      + comparison_operator                   = "GreaterThanOrEqualToThreshold"
      + dimensions                            = {
          + "AutoScalingGroupName" = "terraform-20210517130615957300000001-asg"
        }
      + evaluate_low_sample_count_percentiles = (known after apply)
      + evaluation_periods                    = 2
      + id                                    = (known after apply)
      + metric_name                           = "CPUUtilization"
      + namespace                             = "AWS/EC2"
      + period                                = 120
      + statistic                             = "Average"
      + tags_all                              = (known after apply)
      + threshold                             = 60
      + treat_missing_data                    = "missing"
    }

  # aws_route_table_association.my_vpc_ap-south-1c_public will be created
  + resource "aws_route_table_association" "my_vpc_ap-south-1c_public" {
      + id             = (known after apply)
      + route_table_id = "rtb-0e5cc5557238ea39f"
      + subnet_id      = (known after apply)
    }

  # aws_subnet.public_ap-south-1c will be created
  + resource "aws_subnet" "public_ap-south-1c" {
      + arn                             = (known after apply)
      + assign_ipv6_address_on_creation = false
      + availability_zone               = "ap-south-1c"
      + availability_zone_id            = (known after apply)
      + cidr_block                      = "10.0.2.0/24"
      + id                              = (known after apply)
      + ipv6_cidr_block_association_id  = (known after apply)
      + map_public_ip_on_launch         = false
      + owner_id                        = (known after apply)
      + tags                            = {
          + "Name" = "Public Subnet ap-south-1c"
        }
      + tags_all                        = {
          + "Name" = "Public Subnet ap-south-1c"
        }
      + vpc_id                          = "vpc-0e4bc3461cb0b71c4"
    }

Plan: 7 to add, 0 to change, 0 to destroy.

Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.

  Enter a value: yes

aws_subnet.public_ap-south-1c: Creating...
aws_subnet.public_ap-south-1c: Creation complete after 0s [id=subnet-070050812054ab808]
aws_route_table_association.my_vpc_ap-south-1c_public: Creating...
aws_autoscaling_group.web: Creating...
aws_route_table_association.my_vpc_ap-south-1c_public: Creation complete after 0s [id=rtbassoc-07a80d73c023ccfbd]
aws_autoscaling_group.web: Still creating... [10s elapsed]
aws_autoscaling_group.web: Still creating... [20s elapsed]
aws_autoscaling_group.web: Still creating... [30s elapsed]
aws_autoscaling_group.web: Still creating... [40s elapsed]
aws_autoscaling_group.web: Still creating... [50s elapsed]
aws_autoscaling_group.web: Still creating... [1m0s elapsed]
aws_autoscaling_group.web: Still creating... [1m10s elapsed]
aws_autoscaling_group.web: Still creating... [1m20s elapsed]
aws_autoscaling_group.web: Still creating... [1m30s elapsed]
aws_autoscaling_group.web: Still creating... [1m40s elapsed]
aws_autoscaling_group.web: Still creating... [1m50s elapsed]
aws_autoscaling_group.web: Still creating... [2m0s elapsed]
aws_autoscaling_group.web: Still creating... [2m10s elapsed]
aws_autoscaling_group.web: Creation complete after 2m19s [id=terraform-20210517130615957300000001-asg]
aws_autoscaling_policy.web_policy_up: Creating...
aws_autoscaling_policy.web_policy_down: Creating...
aws_autoscaling_policy.web_policy_up: Creation complete after 0s [id=web_policy_up]
aws_cloudwatch_metric_alarm.web_cpu_alarm_up: Creating...
aws_autoscaling_policy.web_policy_down: Creation complete after 0s [id=web_policy_down]
aws_cloudwatch_metric_alarm.web_cpu_alarm_down: Creating...
aws_cloudwatch_metric_alarm.web_cpu_alarm_up: Creation complete after 0s [id=web_cpu_alarm_up]
aws_cloudwatch_metric_alarm.web_cpu_alarm_down: Creation complete after 0s [id=web_cpu_alarm_down]

Apply complete! Resources: 7 added, 0 changed, 0 destroyed.
[root@ip-172-31-45-89 manoj_terraform]#


----------------------------------------------------------------------------------------------------------------------------------
[root@ip-172-31-45-89 manoj_terraform]# terraform plan
aws_instance.Demo_instance: Refreshing state... [id=i-056e19670b7e443e8]
aws_cloudwatch_metric_alarm.web_cpu_alarm_down: Refreshing state... [id=web_cpu_alarm_down]
aws_autoscaling_policy.web_policy_down: Refreshing state... [id=web_policy_down]
aws_autoscaling_group.web: Refreshing state... [id=terraform-20210517130615957300000001-asg]
aws_autoscaling_policy.web_policy_up: Refreshing state... [id=web_policy_up]
aws_launch_configuration.web: Refreshing state... [id=terraform-20210517130615957300000001]
aws_vpc.my_vpc: Refreshing state... [id=vpc-0e4bc3461cb0b71c4]
aws_cloudwatch_metric_alarm.web_cpu_alarm_up: Refreshing state... [id=web_cpu_alarm_up]
aws_subnet.public_ap-south-1a: Refreshing state... [id=subnet-0aacc7fbbf0211ca1]
aws_subnet.public_ap-south-1c: Refreshing state... [id=subnet-070050812054ab808]
aws_security_group.allow_http: Refreshing state... [id=sg-02467971f68b1288f]
aws_subnet.public_ap-south-1b: Refreshing state... [id=subnet-017c1771130c62093]
aws_internet_gateway.my_igw: Refreshing state... [id=igw-0b49f7eb97e689247]
aws_route_table.my_vpc_public: Refreshing state... [id=rtb-0e5cc5557238ea39f]
aws_route_table_association.my_vpc_ap-south-1b_public: Refreshing state... [id=rtbassoc-0e6408e0f0c889a45]
aws_route_table_association.my_vpc_ap-south-1c_public: Refreshing state... [id=rtbassoc-07a80d73c023ccfbd]
aws_route_table_association.my_vpc_ap-south-1a_public: Refreshing state... [id=rtbassoc-0af25acd6f4bce194]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create
  - destroy

Terraform will perform the following actions:

  # aws_autoscaling_group.web will be destroyed
  - resource "aws_autoscaling_group" "web" {
      - arn                       = "arn:aws:autoscaling:ap-south-1:395162570454:autoScalingGroup:0b43e1c4-16d1-4f5c-8808-ded6a0fb307e:autoScalingGroupName/terraform-20210517130615957300000001-asg" -> null
      - availability_zones        = [
          - "ap-south-1a",
          - "ap-south-1b",
          - "ap-south-1c",
        ] -> null
      - capacity_rebalance        = false -> null
      - default_cooldown          = 300 -> null
      - desired_capacity          = 2 -> null
      - enabled_metrics           = [
          - "GroupDesiredCapacity",
          - "GroupInServiceInstances",
          - "GroupMaxSize",
          - "GroupMinSize",
          - "GroupTotalInstances",
        ] -> null
      - force_delete              = false -> null
      - force_delete_warm_pool    = false -> null
      - health_check_grace_period = 300 -> null
      - health_check_type         = "EC2" -> null
      - id                        = "terraform-20210517130615957300000001-asg" -> null
      - launch_configuration      = "terraform-20210517130615957300000001" -> null
      - max_instance_lifetime     = 0 -> null
      - max_size                  = 4 -> null
      - metrics_granularity       = "1Minute" -> null
      - min_size                  = 1 -> null
      - name                      = "terraform-20210517130615957300000001-asg" -> null
      - protect_from_scale_in     = false -> null
      - service_linked_role_arn   = "arn:aws:iam::395162570454:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling" -> null
      - vpc_zone_identifier       = [
          - "subnet-017c1771130c62093",
          - "subnet-070050812054ab808",
          - "subnet-0aacc7fbbf0211ca1",
        ] -> null
      - wait_for_capacity_timeout = "10m" -> null

      - tag {
          - key                 = "Name" -> null
          - propagate_at_launch = true -> null
          - value               = "web" -> null
        }
    }

  # aws_autoscaling_policy.web_policy_down will be destroyed
  - resource "aws_autoscaling_policy" "web_policy_down" {
      - adjustment_type           = "ChangeInCapacity" -> null
      - arn                       = "arn:aws:autoscaling:ap-south-1:395162570454:scalingPolicy:3c275964-d74f-4dc8-a1b0-accf06025775:autoScalingGroupName/terraform-20210517130615957300000001-asg:policyName/web_policy_down" -> null
      - autoscaling_group_name    = "terraform-20210517130615957300000001-asg" -> null
      - cooldown                  = 300 -> null
      - estimated_instance_warmup = 0 -> null
      - id                        = "web_policy_down" -> null
      - name                      = "web_policy_down" -> null
      - policy_type               = "SimpleScaling" -> null
      - scaling_adjustment        = -1 -> null
    }

  # aws_autoscaling_policy.web_policy_up will be destroyed
  - resource "aws_autoscaling_policy" "web_policy_up" {
      - adjustment_type           = "ChangeInCapacity" -> null
      - arn                       = "arn:aws:autoscaling:ap-south-1:395162570454:scalingPolicy:87c1fa13-e851-4eec-a53b-45a87f9264e6:autoScalingGroupName/terraform-20210517130615957300000001-asg:policyName/web_policy_up" -> null
      - autoscaling_group_name    = "terraform-20210517130615957300000001-asg" -> null
      - cooldown                  = 300 -> null
      - estimated_instance_warmup = 0 -> null
      - id                        = "web_policy_up" -> null
      - name                      = "web_policy_up" -> null
      - policy_type               = "SimpleScaling" -> null
      - scaling_adjustment        = 1 -> null
    }

  # aws_cloudwatch_metric_alarm.web_cpu_alarm_down will be destroyed
  - resource "aws_cloudwatch_metric_alarm" "web_cpu_alarm_down" {
      - actions_enabled     = true -> null
      - alarm_actions       = [
          - "arn:aws:autoscaling:ap-south-1:395162570454:scalingPolicy:3c275964-d74f-4dc8-a1b0-accf06025775:autoScalingGroupName/terraform-20210517130615957300000001-asg:policyName/web_policy_down",
        ] -> null
      - alarm_description   = "This metric monitor EC2 instance CPU utilization" -> null
      - alarm_name          = "web_cpu_alarm_down" -> null
      - arn                 = "arn:aws:cloudwatch:ap-south-1:395162570454:alarm:web_cpu_alarm_down" -> null
      - comparison_operator = "LessThanOrEqualToThreshold" -> null
      - datapoints_to_alarm = 0 -> null
      - dimensions          = {
          - "AutoScalingGroupName" = "terraform-20210517130615957300000001-asg"
        } -> null
      - evaluation_periods  = 2 -> null
      - id                  = "web_cpu_alarm_down" -> null
      - metric_name         = "CPUUtilization" -> null
      - namespace           = "AWS/EC2" -> null
      - period              = 120 -> null
      - statistic           = "Average" -> null
      - tags_all            = {} -> null
      - threshold           = 10 -> null
      - treat_missing_data  = "missing" -> null
    }

  # aws_cloudwatch_metric_alarm.web_cpu_alarm_up will be destroyed
  - resource "aws_cloudwatch_metric_alarm" "web_cpu_alarm_up" {
      - actions_enabled     = true -> null
      - alarm_actions       = [
          - "arn:aws:autoscaling:ap-south-1:395162570454:scalingPolicy:87c1fa13-e851-4eec-a53b-45a87f9264e6:autoScalingGroupName/terraform-20210517130615957300000001-asg:policyName/web_policy_up",
        ] -> null
      - alarm_description   = "This metric monitor EC2 instance CPU utilization" -> null
      - alarm_name          = "web_cpu_alarm_up" -> null
      - arn                 = "arn:aws:cloudwatch:ap-south-1:395162570454:alarm:web_cpu_alarm_up" -> null
      - comparison_operator = "GreaterThanOrEqualToThreshold" -> null
      - datapoints_to_alarm = 0 -> null
      - dimensions          = {
          - "AutoScalingGroupName" = "terraform-20210517130615957300000001-asg"
        } -> null
      - evaluation_periods  = 2 -> null
      - id                  = "web_cpu_alarm_up" -> null
      - metric_name         = "CPUUtilization" -> null
      - namespace           = "AWS/EC2" -> null
      - period              = 120 -> null
      - statistic           = "Average" -> null
      - tags_all            = {} -> null
      - threshold           = 60 -> null
      - treat_missing_data  = "missing" -> null
    }

  # aws_launch_configuration.web will be destroyed
  - resource "aws_launch_configuration" "web" {
      - arn                              = "arn:aws:autoscaling:ap-south-1:395162570454:launchConfiguration:ee1a5092-a047-486c-a30a-041dc843b8ef:launchConfigurationName/terraform-20210517130615957300000001" -> null
      - associate_public_ip_address      = true -> null
      - ebs_optimized                    = false -> null
      - enable_monitoring                = true -> null
      - id                               = "terraform-20210517130615957300000001" -> null
      - image_id                         = "ami-0a9d27a9f4f5c0efc" -> null
      - instance_type                    = "t2.micro" -> null
      - key_name                         = "test" -> null
      - name                             = "terraform-20210517130615957300000001" -> null
      - security_groups                  = [
          - "sg-02467971f68b1288f",
        ] -> null
      - user_data                        = "4aac886b82872637b6fc233adfbe59b9704bf8d1" -> null
      - vpc_classic_link_security_groups = [] -> null
    }

  # aws_s3_bucket.S3bucket will be created
  + resource "aws_s3_bucket" "S3bucket" {
      + acceleration_status         = (known after apply)
      + acl                         = "public-read"
      + arn                         = (known after apply)
      + bucket                      = "testing-s3-with-terraform"
      + bucket_domain_name          = (known after apply)
      + bucket_regional_domain_name = (known after apply)
      + force_destroy               = false
      + hosted_zone_id              = (known after apply)
      + id                          = (known after apply)
      + region                      = (known after apply)
      + request_payer               = (known after apply)
      + tags_all                    = (known after apply)
      + website_domain              = (known after apply)
      + website_endpoint            = (known after apply)

      + lifecycle_rule {
          + enabled = true
          + id      = (known after apply)

          + transition {
              + days          = 30
              + storage_class = "STANDARD_IA"
            }
          + transition {
              + days          = 60
              + storage_class = "GLACIER"
            }
        }

      + server_side_encryption_configuration {
          + rule {
              + apply_server_side_encryption_by_default {
                  + sse_algorithm = "AES256"
                }
            }
        }

      + versioning {
          + enabled    = true
          + mfa_delete = false
        }
    }

Plan: 1 to add, 0 to change, 6 to destroy.

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

Note: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run "terraform apply" now.


--------------------------------------------------------------------------------------------

[root@ip-172-31-45-89 manoj_terraform]# terraform apply
aws_vpc.my_vpc: Refreshing state... [id=vpc-0e4bc3461cb0b71c4]
aws_instance.Demo_instance: Refreshing state... [id=i-056e19670b7e443e8]
aws_security_group.allow_http: Refreshing state... [id=sg-02467971f68b1288f]
aws_subnet.public_ap-south-1c: Refreshing state... [id=subnet-070050812054ab808]
aws_internet_gateway.my_igw: Refreshing state... [id=igw-0b49f7eb97e689247]
aws_subnet.public_ap-south-1b: Refreshing state... [id=subnet-017c1771130c62093]
aws_subnet.public_ap-south-1a: Refreshing state... [id=subnet-0aacc7fbbf0211ca1]
aws_route_table.my_vpc_public: Refreshing state... [id=rtb-0e5cc5557238ea39f]
aws_route_table_association.my_vpc_ap-south-1c_public: Refreshing state... [id=rtbassoc-07a80d73c023ccfbd]
aws_route_table_association.my_vpc_ap-south-1b_public: Refreshing state... [id=rtbassoc-0e6408e0f0c889a45]
aws_route_table_association.my_vpc_ap-south-1a_public: Refreshing state... [id=rtbassoc-0af25acd6f4bce194]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # aws_s3_bucket.S3bucket will be created
  + resource "aws_s3_bucket" "S3bucket" {
      + acceleration_status         = (known after apply)
      + acl                         = "public-read"
      + arn                         = (known after apply)
      + bucket                      = "manoj-s3-with-terraform"
      + bucket_domain_name          = (known after apply)
      + bucket_regional_domain_name = (known after apply)
      + force_destroy               = false
      + hosted_zone_id              = (known after apply)
      + id                          = (known after apply)
      + region                      = (known after apply)
      + request_payer               = (known after apply)
      + tags_all                    = (known after apply)
      + website_domain              = (known after apply)
      + website_endpoint            = (known after apply)

      + lifecycle_rule {
          + enabled = true
          + id      = (known after apply)

          + transition {
              + days          = 30
              + storage_class = "STANDARD_IA"
            }
          + transition {
              + days          = 60
              + storage_class = "GLACIER"
            }
        }

      + server_side_encryption_configuration {
          + rule {
              + apply_server_side_encryption_by_default {
                  + sse_algorithm = "AES256"
                }
            }
        }

      + versioning {
          + enabled    = true
          + mfa_delete = false
        }
    }

Plan: 1 to add, 0 to change, 0 to destroy.

Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.

  Enter a value: yes

aws_s3_bucket.S3bucket: Creating...
aws_s3_bucket.S3bucket: Creation complete after 3s [id=manoj-s3-with-terraform]

Apply complete! Resources: 1 added, 0 changed, 0 destroyed.
[root@ip-172-31-45-89 manoj_terraform]#


----------------------------------------------------------------------------------------------------------------

[root@ip-172-31-45-89 manoj_terraform]# cat EC2S3.tf
#Create an IAM role

resource "aws_iam_role" "test_role" {
  name = "test_role"

  assume_role_policy = <<EOF
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Action": "sts:AssumeRole",
      "Principal": {
        "Service": "ec2.amazonaws.com"
      },
      "Effect": "Allow",
      "Sid": ""
    }
  ]
}
EOF

  tags = {
      tag-key = "tag-value"
  }
}

#Create EC2 Instance Profile

resource "aws_iam_instance_profile" "test_profile" {
  name = "test_profile"
  role = "${aws_iam_role.test_role.name}"
}

#Adding IAM Policies and give full access to S3 bucket

resource "aws_iam_role_policy" "test_policy" {
  name = "test_policy"
  role = "${aws_iam_role.test_role.id}"

  policy = <<EOF
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Action": [
        "s3:*"
      ],
      "Effect": "Allow",
      "Resource": "*"
    }
  ]
}
EOF
}

#Attach the created role to EC2 instance

resource "aws_instance" "role-test" {
  ami = "ami-010aff33ed5991201"
  instance_type = "t2.micro"
  iam_instance_profile = "${aws_iam_instance_profile.test_profile.name}"
  key_name = "test"
}

[root@ip-172-31-45-89 manoj_terraform]#

---------------------------------------------------------------------------------------------------------------

[root@ip-172-31-45-89 manoj_terraform]# terraform plan
aws_vpc.my_vpc: Refreshing state... [id=vpc-0e4bc3461cb0b71c4]
aws_s3_bucket.S3bucket: Refreshing state... [id=manoj-s3-with-terraform]
aws_instance.Demo_instance: Refreshing state... [id=i-056e19670b7e443e8]
aws_security_group.allow_http: Refreshing state... [id=sg-02467971f68b1288f]
aws_subnet.public_ap-south-1a: Refreshing state... [id=subnet-0aacc7fbbf0211ca1]
aws_subnet.public_ap-south-1b: Refreshing state... [id=subnet-017c1771130c62093]
aws_subnet.public_ap-south-1c: Refreshing state... [id=subnet-070050812054ab808]
aws_internet_gateway.my_igw: Refreshing state... [id=igw-0b49f7eb97e689247]
aws_route_table.my_vpc_public: Refreshing state... [id=rtb-0e5cc5557238ea39f]
aws_route_table_association.my_vpc_ap-south-1a_public: Refreshing state... [id=rtbassoc-0af25acd6f4bce194]
aws_route_table_association.my_vpc_ap-south-1c_public: Refreshing state... [id=rtbassoc-07a80d73c023ccfbd]
aws_route_table_association.my_vpc_ap-south-1b_public: Refreshing state... [id=rtbassoc-0e6408e0f0c889a45]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # aws_iam_instance_profile.test_profile will be created
  + resource "aws_iam_instance_profile" "test_profile" {
      + arn         = (known after apply)
      + create_date = (known after apply)
      + id          = (known after apply)
      + name        = "test_profile"
      + path        = "/"
      + role        = "test_role"
      + tags_all    = (known after apply)
      + unique_id   = (known after apply)
    }

  # aws_iam_role.test_role will be created
  + resource "aws_iam_role" "test_role" {
      + arn                   = (known after apply)
      + assume_role_policy    = jsonencode(
            {
              + Statement = [
                  + {
                      + Action    = "sts:AssumeRole"
                      + Effect    = "Allow"
                      + Principal = {
                          + Service = "ec2.amazonaws.com"
                        }
                      + Sid       = ""
                    },
                ]
              + Version   = "2012-10-17"
            }
        )
      + create_date           = (known after apply)
      + force_detach_policies = false
      + id                    = (known after apply)
      + managed_policy_arns   = (known after apply)
      + max_session_duration  = 3600
      + name                  = "test_role"
      + path                  = "/"
      + tags                  = {
          + "tag-key" = "tag-value"
        }
      + tags_all              = {
          + "tag-key" = "tag-value"
        }
      + unique_id             = (known after apply)

      + inline_policy {
          + name   = (known after apply)
          + policy = (known after apply)
        }
    }

  # aws_iam_role_policy.test_policy will be created
  + resource "aws_iam_role_policy" "test_policy" {
      + id     = (known after apply)
      + name   = "test_policy"
      + policy = jsonencode(
            {
              + Statement = [
                  + {
                      + Action   = [
                          + "s3:*",
                        ]
                      + Effect   = "Allow"
                      + Resource = "*"
                    },
                ]
              + Version   = "2012-10-17"
            }
        )
      + role   = (known after apply)
    }

  # aws_instance.role-test will be created
  + resource "aws_instance" "role-test" {
      + ami                                  = "ami-010aff33ed5991201"
      + arn                                  = (known after apply)
      + associate_public_ip_address          = (known after apply)
      + availability_zone                    = (known after apply)
      + cpu_core_count                       = (known after apply)
      + cpu_threads_per_core                 = (known after apply)
      + get_password_data                    = false
      + host_id                              = (known after apply)
      + iam_instance_profile                 = "test_profile"
      + id                                   = (known after apply)
      + instance_initiated_shutdown_behavior = (known after apply)
      + instance_state                       = (known after apply)
      + instance_type                        = "t2.micro"
      + ipv6_address_count                   = (known after apply)
      + ipv6_addresses                       = (known after apply)
      + key_name                             = "test"
      + outpost_arn                          = (known after apply)
      + password_data                        = (known after apply)
      + placement_group                      = (known after apply)
      + primary_network_interface_id         = (known after apply)
      + private_dns                          = (known after apply)
      + private_ip                           = (known after apply)
      + public_dns                           = (known after apply)
      + public_ip                            = (known after apply)
      + secondary_private_ips                = (known after apply)
      + security_groups                      = (known after apply)
      + source_dest_check                    = true
      + subnet_id                            = (known after apply)
      + tags_all                             = (known after apply)
      + tenancy                              = (known after apply)
      + vpc_security_group_ids               = (known after apply)

      + ebs_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + snapshot_id           = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }

      + enclave_options {
          + enabled = (known after apply)
        }

      + ephemeral_block_device {
          + device_name  = (known after apply)
          + no_device    = (known after apply)
          + virtual_name = (known after apply)
        }

      + metadata_options {
          + http_endpoint               = (known after apply)
          + http_put_response_hop_limit = (known after apply)
          + http_tokens                 = (known after apply)
        }

      + network_interface {
          + delete_on_termination = (known after apply)
          + device_index          = (known after apply)
          + network_interface_id  = (known after apply)
        }

      + root_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }
    }

Plan: 4 to add, 0 to change, 0 to destroy.

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

Note: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run "terraform apply" now.

--------------------------------------------------------------------------------------------

[root@ip-172-31-45-89 manoj_terraform]# terraform apply
aws_instance.Demo_instance: Refreshing state... [id=i-056e19670b7e443e8]
aws_vpc.my_vpc: Refreshing state... [id=vpc-0e4bc3461cb0b71c4]
aws_s3_bucket.S3bucket: Refreshing state... [id=manoj-s3-with-terraform]
aws_security_group.allow_http: Refreshing state... [id=sg-02467971f68b1288f]
aws_subnet.public_ap-south-1b: Refreshing state... [id=subnet-017c1771130c62093]
aws_internet_gateway.my_igw: Refreshing state... [id=igw-0b49f7eb97e689247]
aws_subnet.public_ap-south-1c: Refreshing state... [id=subnet-070050812054ab808]
aws_subnet.public_ap-south-1a: Refreshing state... [id=subnet-0aacc7fbbf0211ca1]
aws_route_table.my_vpc_public: Refreshing state... [id=rtb-0e5cc5557238ea39f]
aws_route_table_association.my_vpc_ap-south-1a_public: Refreshing state... [id=rtbassoc-0af25acd6f4bce194]
aws_route_table_association.my_vpc_ap-south-1b_public: Refreshing state... [id=rtbassoc-0e6408e0f0c889a45]
aws_route_table_association.my_vpc_ap-south-1c_public: Refreshing state... [id=rtbassoc-07a80d73c023ccfbd]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # aws_iam_instance_profile.test_profile will be created
  + resource "aws_iam_instance_profile" "test_profile" {
      + arn         = (known after apply)
      + create_date = (known after apply)
      + id          = (known after apply)
      + name        = "test_profile"
      + path        = "/"
      + role        = "test_role"
      + tags_all    = (known after apply)
      + unique_id   = (known after apply)
    }

  # aws_iam_role.test_role will be created
  + resource "aws_iam_role" "test_role" {
      + arn                   = (known after apply)
      + assume_role_policy    = jsonencode(
            {
              + Statement = [
                  + {
                      + Action    = "sts:AssumeRole"
                      + Effect    = "Allow"
                      + Principal = {
                          + Service = "ec2.amazonaws.com"
                        }
                      + Sid       = ""
                    },
                ]
              + Version   = "2012-10-17"
            }
        )
      + create_date           = (known after apply)
      + force_detach_policies = false
      + id                    = (known after apply)
      + managed_policy_arns   = (known after apply)
      + max_session_duration  = 3600
      + name                  = "test_role"
      + path                  = "/"
      + tags                  = {
          + "tag-key" = "tag-value"
        }
      + tags_all              = {
          + "tag-key" = "tag-value"
        }
      + unique_id             = (known after apply)

      + inline_policy {
          + name   = (known after apply)
          + policy = (known after apply)
        }
    }

  # aws_iam_role_policy.test_policy will be created
  + resource "aws_iam_role_policy" "test_policy" {
      + id     = (known after apply)
      + name   = "test_policy"
      + policy = jsonencode(
            {
              + Statement = [
                  + {
                      + Action   = [
                          + "s3:*",
                        ]
                      + Effect   = "Allow"
                      + Resource = "*"
                    },
                ]
              + Version   = "2012-10-17"
            }
        )
      + role   = (known after apply)
    }

  # aws_instance.role-test will be created
  + resource "aws_instance" "role-test" {
      + ami                                  = "ami-010aff33ed5991201"
      + arn                                  = (known after apply)
      + associate_public_ip_address          = (known after apply)
      + availability_zone                    = (known after apply)
      + cpu_core_count                       = (known after apply)
      + cpu_threads_per_core                 = (known after apply)
      + get_password_data                    = false
      + host_id                              = (known after apply)
      + iam_instance_profile                 = "test_profile"
      + id                                   = (known after apply)
      + instance_initiated_shutdown_behavior = (known after apply)
      + instance_state                       = (known after apply)
      + instance_type                        = "t2.micro"
      + ipv6_address_count                   = (known after apply)
      + ipv6_addresses                       = (known after apply)
      + key_name                             = "test"
      + outpost_arn                          = (known after apply)
      + password_data                        = (known after apply)
      + placement_group                      = (known after apply)
      + primary_network_interface_id         = (known after apply)
      + private_dns                          = (known after apply)
      + private_ip                           = (known after apply)
      + public_dns                           = (known after apply)
      + public_ip                            = (known after apply)
      + secondary_private_ips                = (known after apply)
      + security_groups                      = (known after apply)
      + source_dest_check                    = true
      + subnet_id                            = (known after apply)
      + tags_all                             = (known after apply)
      + tenancy                              = (known after apply)
      + vpc_security_group_ids               = (known after apply)

      + ebs_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + snapshot_id           = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }

      + enclave_options {
          + enabled = (known after apply)
        }

      + ephemeral_block_device {
          + device_name  = (known after apply)
          + no_device    = (known after apply)
          + virtual_name = (known after apply)
        }

      + metadata_options {
          + http_endpoint               = (known after apply)
          + http_put_response_hop_limit = (known after apply)
          + http_tokens                 = (known after apply)
        }

      + network_interface {
          + delete_on_termination = (known after apply)
          + device_index          = (known after apply)
          + network_interface_id  = (known after apply)
        }

      + root_block_device {
          + delete_on_termination = (known after apply)
          + device_name           = (known after apply)
          + encrypted             = (known after apply)
          + iops                  = (known after apply)
          + kms_key_id            = (known after apply)
          + tags                  = (known after apply)
          + throughput            = (known after apply)
          + volume_id             = (known after apply)
          + volume_size           = (known after apply)
          + volume_type           = (known after apply)
        }
    }

Plan: 4 to add, 0 to change, 0 to destroy.

Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.

  Enter a value: yes

aws_iam_role.test_role: Creating...
aws_iam_role.test_role: Creation complete after 3s [id=test_role]
aws_iam_instance_profile.test_profile: Creating...
aws_iam_role_policy.test_policy: Creating...
aws_iam_role_policy.test_policy: Creation complete after 2s [id=test_role:test_policy]
aws_iam_instance_profile.test_profile: Creation complete after 4s [id=test_profile]
aws_instance.role-test: Creating...
aws_instance.role-test: Still creating... [10s elapsed]
aws_instance.role-test: Still creating... [20s elapsed]
aws_instance.role-test: Creation complete after 30s [id=i-052732406614602ff]

Apply complete! Resources: 4 added, 0 changed, 0 destroyed.
[root@ip-172-31-45-89 manoj_terraform]#

----------------------------------------------------------------------------------------------------------

[root@ip-172-31-45-89 manoj_terraform]# terraform plan
aws_iam_role.test_role: Refreshing state... [id=test_role]
aws_vpc.my_vpc: Refreshing state... [id=vpc-0e4bc3461cb0b71c4]
aws_s3_bucket.S3bucket: Refreshing state... [id=manoj-s3-with-terraform]
aws_instance.Demo_instance: Refreshing state... [id=i-056e19670b7e443e8]
aws_subnet.public_ap-south-1b: Refreshing state... [id=subnet-017c1771130c62093]
aws_subnet.public_ap-south-1a: Refreshing state... [id=subnet-0aacc7fbbf0211ca1]
aws_security_group.allow_http: Refreshing state... [id=sg-02467971f68b1288f]
aws_subnet.public_ap-south-1c: Refreshing state... [id=subnet-070050812054ab808]
aws_internet_gateway.my_igw: Refreshing state... [id=igw-0b49f7eb97e689247]
aws_route_table.my_vpc_public: Refreshing state... [id=rtb-0e5cc5557238ea39f]
aws_route_table_association.my_vpc_ap-south-1a_public: Refreshing state... [id=rtbassoc-0af25acd6f4bce194]
aws_route_table_association.my_vpc_ap-south-1c_public: Refreshing state... [id=rtbassoc-07a80d73c023ccfbd]
aws_route_table_association.my_vpc_ap-south-1b_public: Refreshing state... [id=rtbassoc-0e6408e0f0c889a45]
aws_iam_role_policy.test_policy: Refreshing state... [id=test_role:test_policy]
aws_iam_instance_profile.test_profile: Refreshing state... [id=test_profile]
aws_instance.role-test: Refreshing state... [id=i-052732406614602ff]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  ~ update in-place

Terraform will perform the following actions:

  # aws_instance.Demo_instance will be updated in-place
  ~ resource "aws_instance" "Demo_instance" {
        id                                   = "i-056e19670b7e443e8"
      ~ instance_type                        = "t2.micro" -> "t2.medium"
        tags                                 = {
            "Name" = "Demo_server"
        }
        # (28 unchanged attributes hidden)




        # (4 unchanged blocks hidden)
    }

Plan: 0 to add, 1 to change, 0 to destroy.

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

Note: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run "terraform apply" now.
[root@ip-172-31-45-89 manoj_terraform]#


----------------------------------------------------------------------------------------------------------


[root@ip-172-31-45-89 manoj_terraform]# terraform destroy
aws_iam_role.test_role: Refreshing state... [id=test_role]
aws_vpc.my_vpc: Refreshing state... [id=vpc-0e4bc3461cb0b71c4]
aws_instance.Demo_instance: Refreshing state... [id=i-056e19670b7e443e8]
aws_s3_bucket.S3bucket: Refreshing state... [id=manoj-s3-with-terraform]
aws_subnet.public_ap-south-1b: Refreshing state... [id=subnet-017c1771130c62093]
aws_internet_gateway.my_igw: Refreshing state... [id=igw-0b49f7eb97e689247]
aws_subnet.public_ap-south-1c: Refreshing state... [id=subnet-070050812054ab808]
aws_security_group.allow_http: Refreshing state... [id=sg-02467971f68b1288f]
aws_subnet.public_ap-south-1a: Refreshing state... [id=subnet-0aacc7fbbf0211ca1]
aws_route_table.my_vpc_public: Refreshing state... [id=rtb-0e5cc5557238ea39f]
aws_route_table_association.my_vpc_ap-south-1a_public: Refreshing state... [id=rtbassoc-0af25acd6f4bce194]
aws_route_table_association.my_vpc_ap-south-1c_public: Refreshing state... [id=rtbassoc-07a80d73c023ccfbd]
aws_route_table_association.my_vpc_ap-south-1b_public: Refreshing state... [id=rtbassoc-0e6408e0f0c889a45]
aws_iam_role_policy.test_policy: Refreshing state... [id=test_role:test_policy]
aws_iam_instance_profile.test_profile: Refreshing state... [id=test_profile]
aws_instance.role-test: Refreshing state... [id=i-052732406614602ff]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  - destroy

Terraform will perform the following actions:

  # aws_iam_instance_profile.test_profile will be destroyed
  - resource "aws_iam_instance_profile" "test_profile" {
      - arn         = "arn:aws:iam::395162570454:instance-profile/test_profile" -> null
      - create_date = "2021-05-17T17:23:05Z" -> null
      - id          = "test_profile" -> null
      - name        = "test_profile" -> null
      - path        = "/" -> null
      - role        = "test_role" -> null
      - tags        = {} -> null
      - tags_all    = {} -> null
      - unique_id   = "AIPAVYAMGJ3LJMTGUY535" -> null
    }

  # aws_iam_role.test_role will be destroyed
  - resource "aws_iam_role" "test_role" {
      - arn                   = "arn:aws:iam::395162570454:role/test_role" -> null
      - assume_role_policy    = jsonencode(
            {
              - Statement = [
                  - {
                      - Action    = "sts:AssumeRole"
                      - Effect    = "Allow"
                      - Principal = {
                          - Service = "ec2.amazonaws.com"
                        }
                      - Sid       = ""
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> null
      - create_date           = "2021-05-17T17:23:01Z" -> null
      - force_detach_policies = false -> null
      - id                    = "test_role" -> null
      - managed_policy_arns   = [] -> null
      - max_session_duration  = 3600 -> null
      - name                  = "test_role" -> null
      - path                  = "/" -> null
      - tags                  = {
          - "tag-key" = "tag-value"
        } -> null
      - tags_all              = {
          - "tag-key" = "tag-value"
        } -> null
      - unique_id             = "AROAVYAMGJ3LIGEQ6NSN6" -> null

      - inline_policy {
          - name   = "test_policy" -> null
          - policy = jsonencode(
                {
                  - Statement = [
                      - {
                          - Action   = [
                              - "s3:*",
                            ]
                          - Effect   = "Allow"
                          - Resource = "*"
                        },
                    ]
                  - Version   = "2012-10-17"
                }
            ) -> null
        }
    }

  # aws_iam_role_policy.test_policy will be destroyed
  - resource "aws_iam_role_policy" "test_policy" {
      - id     = "test_role:test_policy" -> null
      - name   = "test_policy" -> null
      - policy = jsonencode(
            {
              - Statement = [
                  - {
                      - Action   = [
                          - "s3:*",
                        ]
                      - Effect   = "Allow"
                      - Resource = "*"
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> null
      - role   = "test_role" -> null
    }

  # aws_instance.Demo_instance will be destroyed
  - resource "aws_instance" "Demo_instance" {
      - ami                                  = "ami-0a9d27a9f4f5c0efc" -> null
      - arn                                  = "arn:aws:ec2:ap-south-1:395162570454:instance/i-056e19670b7e443e8" -> null
      - associate_public_ip_address          = true -> null
      - availability_zone                    = "ap-south-1b" -> null
      - cpu_core_count                       = 2 -> null
      - cpu_threads_per_core                 = 1 -> null
      - disable_api_termination              = false -> null
      - ebs_optimized                        = false -> null
      - get_password_data                    = false -> null
      - hibernation                          = false -> null
      - id                                   = "i-056e19670b7e443e8" -> null
      - instance_initiated_shutdown_behavior = "stop" -> null
      - instance_state                       = "running" -> null
      - instance_type                        = "t2.medium" -> null
      - ipv6_address_count                   = 0 -> null
      - ipv6_addresses                       = [] -> null
      - key_name                             = "test" -> null
      - monitoring                           = false -> null
      - primary_network_interface_id         = "eni-05a1e606e91b907e5" -> null
      - private_dns                          = "ip-172-31-7-176.ap-south-1.compute.internal" -> null
      - private_ip                           = "172.31.7.176" -> null
      - public_dns                           = "ec2-3-108-55-45.ap-south-1.compute.amazonaws.com" -> null
      - public_ip                            = "3.108.55.45" -> null
      - secondary_private_ips                = [] -> null
      - security_groups                      = [
          - "default",
        ] -> null
      - source_dest_check                    = true -> null
      - subnet_id                            = "subnet-07bdc44b" -> null
      - tags                                 = {
          - "Name" = "Demo_server"
        } -> null
      - tags_all                             = {
          - "Name" = "Demo_server"
        } -> null
      - tenancy                              = "default" -> null
      - vpc_security_group_ids               = [
          - "sg-9acb5ffd",
        ] -> null

      - credit_specification {
          - cpu_credits = "standard" -> null
        }

      - enclave_options {
          - enabled = false -> null
        }

      - metadata_options {
          - http_endpoint               = "enabled" -> null
          - http_put_response_hop_limit = 1 -> null
          - http_tokens                 = "optional" -> null
        }

      - root_block_device {
          - delete_on_termination = true -> null
          - device_name           = "/dev/sda1" -> null
          - encrypted             = false -> null
          - iops                  = 100 -> null
          - tags                  = {} -> null
          - throughput            = 0 -> null
          - volume_id             = "vol-096f54e6da811abd3" -> null
          - volume_size           = 10 -> null
          - volume_type           = "gp2" -> null
        }
    }

  # aws_instance.role-test will be destroyed
  - resource "aws_instance" "role-test" {
      - ami                                  = "ami-010aff33ed5991201" -> null
      - arn                                  = "arn:aws:ec2:ap-south-1:395162570454:instance/i-052732406614602ff" -> null
      - associate_public_ip_address          = true -> null
      - availability_zone                    = "ap-south-1a" -> null
      - cpu_core_count                       = 1 -> null
      - cpu_threads_per_core                 = 1 -> null
      - disable_api_termination              = false -> null
      - ebs_optimized                        = false -> null
      - get_password_data                    = false -> null
      - hibernation                          = false -> null
      - iam_instance_profile                 = "test_profile" -> null
      - id                                   = "i-052732406614602ff" -> null
      - instance_initiated_shutdown_behavior = "stop" -> null
      - instance_state                       = "running" -> null
      - instance_type                        = "t2.micro" -> null
      - ipv6_address_count                   = 0 -> null
      - ipv6_addresses                       = [] -> null
      - key_name                             = "test" -> null
      - monitoring                           = false -> null
      - primary_network_interface_id         = "eni-007ddc65a461cc786" -> null
      - private_dns                          = "ip-172-31-45-16.ap-south-1.compute.internal" -> null
      - private_ip                           = "172.31.45.16" -> null
      - public_dns                           = "ec2-15-207-106-114.ap-south-1.compute.amazonaws.com" -> null
      - public_ip                            = "15.207.106.114" -> null
      - secondary_private_ips                = [] -> null
      - security_groups                      = [
          - "default",
        ] -> null
      - source_dest_check                    = true -> null
      - subnet_id                            = "subnet-0faaa267" -> null
      - tags                                 = {} -> null
      - tags_all                             = {} -> null
      - tenancy                              = "default" -> null
      - vpc_security_group_ids               = [
          - "sg-9acb5ffd",
        ] -> null

      - credit_specification {
          - cpu_credits = "standard" -> null
        }

      - enclave_options {
          - enabled = false -> null
        }

      - metadata_options {
          - http_endpoint               = "enabled" -> null
          - http_put_response_hop_limit = 1 -> null
          - http_tokens                 = "optional" -> null
        }

      - root_block_device {
          - delete_on_termination = true -> null
          - device_name           = "/dev/xvda" -> null
          - encrypted             = false -> null
          - iops                  = 100 -> null
          - tags                  = {} -> null
          - throughput            = 0 -> null
          - volume_id             = "vol-0d2390787a2f2a962" -> null
          - volume_size           = 8 -> null
          - volume_type           = "gp2" -> null
        }
    }

  # aws_internet_gateway.my_igw will be destroyed
  - resource "aws_internet_gateway" "my_igw" {
      - arn      = "arn:aws:ec2:ap-south-1:395162570454:internet-gateway/igw-0b49f7eb97e689247" -> null
      - id       = "igw-0b49f7eb97e689247" -> null
      - owner_id = "395162570454" -> null
      - tags     = {
          - "Name" = "demo_igw"
        } -> null
      - tags_all = {
          - "Name" = "demo_igw"
        } -> null
      - vpc_id   = "vpc-0e4bc3461cb0b71c4" -> null
    }

  # aws_route_table.my_vpc_public will be destroyed
  - resource "aws_route_table" "my_vpc_public" {
      - arn              = "arn:aws:ec2:ap-south-1:395162570454:route-table/rtb-0e5cc5557238ea39f" -> null
      - id               = "rtb-0e5cc5557238ea39f" -> null
      - owner_id         = "395162570454" -> null
      - propagating_vgws = [] -> null
      - route            = [
          - {
              - carrier_gateway_id         = ""
              - cidr_block                 = "0.0.0.0/0"
              - destination_prefix_list_id = ""
              - egress_only_gateway_id     = ""
              - gateway_id                 = "igw-0b49f7eb97e689247"
              - instance_id                = ""
              - ipv6_cidr_block            = ""
              - local_gateway_id           = ""
              - nat_gateway_id             = ""
              - network_interface_id       = ""
              - transit_gateway_id         = ""
              - vpc_endpoint_id            = ""
              - vpc_peering_connection_id  = ""
            },
        ] -> null
      - tags             = {
          - "Name" = "Public Subnets Route Table for My VPC"
        } -> null
      - tags_all         = {
          - "Name" = "Public Subnets Route Table for My VPC"
        } -> null
      - vpc_id           = "vpc-0e4bc3461cb0b71c4" -> null
    }

  # aws_route_table_association.my_vpc_ap-south-1a_public will be destroyed
  - resource "aws_route_table_association" "my_vpc_ap-south-1a_public" {
      - id             = "rtbassoc-0af25acd6f4bce194" -> null
      - route_table_id = "rtb-0e5cc5557238ea39f" -> null
      - subnet_id      = "subnet-0aacc7fbbf0211ca1" -> null
    }

  # aws_route_table_association.my_vpc_ap-south-1b_public will be destroyed
  - resource "aws_route_table_association" "my_vpc_ap-south-1b_public" {
      - id             = "rtbassoc-0e6408e0f0c889a45" -> null
      - route_table_id = "rtb-0e5cc5557238ea39f" -> null
      - subnet_id      = "subnet-017c1771130c62093" -> null
    }

  # aws_route_table_association.my_vpc_ap-south-1c_public will be destroyed
  - resource "aws_route_table_association" "my_vpc_ap-south-1c_public" {
      - id             = "rtbassoc-07a80d73c023ccfbd" -> null
      - route_table_id = "rtb-0e5cc5557238ea39f" -> null
      - subnet_id      = "subnet-070050812054ab808" -> null
    }

  # aws_s3_bucket.S3bucket will be destroyed
  - resource "aws_s3_bucket" "S3bucket" {
      - acl                         = "private" -> null
      - arn                         = "arn:aws:s3:::manoj-s3-with-terraform" -> null
      - bucket                      = "manoj-s3-with-terraform" -> null
      - bucket_domain_name          = "manoj-s3-with-terraform.s3.amazonaws.com" -> null
      - bucket_regional_domain_name = "manoj-s3-with-terraform.s3.ap-south-1.amazonaws.com" -> null
      - force_destroy               = false -> null
      - hosted_zone_id              = "Z11RGJOFQNVJUP" -> null
      - id                          = "manoj-s3-with-terraform" -> null
      - region                      = "ap-south-1" -> null
      - request_payer               = "BucketOwner" -> null
      - tags                        = {} -> null
      - tags_all                    = {} -> null

      - lifecycle_rule {
          - abort_incomplete_multipart_upload_days = 0 -> null
          - enabled                                = true -> null
          - id                                     = "tf-s3-lifecycle-20210517151419351800000001" -> null
          - tags                                   = {} -> null

          - transition {
              - days          = 30 -> null
              - storage_class = "STANDARD_IA" -> null
            }
          - transition {
              - days          = 60 -> null
              - storage_class = "GLACIER" -> null
            }
        }

      - server_side_encryption_configuration {
          - rule {
              - bucket_key_enabled = false -> null

              - apply_server_side_encryption_by_default {
                  - sse_algorithm = "AES256" -> null
                }
            }
        }

      - versioning {
          - enabled    = true -> null
          - mfa_delete = false -> null
        }
    }

  # aws_security_group.allow_http will be destroyed
  - resource "aws_security_group" "allow_http" {
      - arn                    = "arn:aws:ec2:ap-south-1:395162570454:security-group/sg-02467971f68b1288f" -> null
      - description            = "Allow HTTP inbound connections" -> null
      - egress                 = [
          - {
              - cidr_blocks      = [
                  - "0.0.0.0/0",
                ]
              - description      = ""
              - from_port        = 0
              - ipv6_cidr_blocks = []
              - prefix_list_ids  = []
              - protocol         = "-1"
              - security_groups  = []
              - self             = false
              - to_port          = 0
            },
        ] -> null
      - id                     = "sg-02467971f68b1288f" -> null
      - ingress                = [
          - {
              - cidr_blocks      = [
                  - "0.0.0.0/0",
                ]
              - description      = ""
              - from_port        = 80
              - ipv6_cidr_blocks = []
              - prefix_list_ids  = []
              - protocol         = "tcp"
              - security_groups  = []
              - self             = false
              - to_port          = 80
            },
        ] -> null
      - name                   = "allow_http" -> null
      - owner_id               = "395162570454" -> null
      - revoke_rules_on_delete = false -> null
      - tags                   = {
          - "Name" = "Allow HTTP Security Group"
        } -> null
      - tags_all               = {
          - "Name" = "Allow HTTP Security Group"
        } -> null
      - vpc_id                 = "vpc-0e4bc3461cb0b71c4" -> null
    }

  # aws_subnet.public_ap-south-1a will be destroyed
  - resource "aws_subnet" "public_ap-south-1a" {
      - arn                             = "arn:aws:ec2:ap-south-1:395162570454:subnet/subnet-0aacc7fbbf0211ca1" -> null
      - assign_ipv6_address_on_creation = false -> null
      - availability_zone               = "ap-south-1a" -> null
      - availability_zone_id            = "aps1-az1" -> null
      - cidr_block                      = "10.0.0.0/24" -> null
      - id                              = "subnet-0aacc7fbbf0211ca1" -> null
      - map_customer_owned_ip_on_launch = false -> null
      - map_public_ip_on_launch         = false -> null
      - owner_id                        = "395162570454" -> null
      - tags                            = {
          - "Name" = "Public Subnet ap-south-1a"
        } -> null
      - tags_all                        = {
          - "Name" = "Public Subnet ap-south-1a"
        } -> null
      - vpc_id                          = "vpc-0e4bc3461cb0b71c4" -> null
    }

  # aws_subnet.public_ap-south-1b will be destroyed
  - resource "aws_subnet" "public_ap-south-1b" {
      - arn                             = "arn:aws:ec2:ap-south-1:395162570454:subnet/subnet-017c1771130c62093" -> null
      - assign_ipv6_address_on_creation = false -> null
      - availability_zone               = "ap-south-1b" -> null
      - availability_zone_id            = "aps1-az3" -> null
      - cidr_block                      = "10.0.1.0/24" -> null
      - id                              = "subnet-017c1771130c62093" -> null
      - map_customer_owned_ip_on_launch = false -> null
      - map_public_ip_on_launch         = false -> null
      - owner_id                        = "395162570454" -> null
      - tags                            = {
          - "Name" = "Public Subnet ap-south-1b"
        } -> null
      - tags_all                        = {
          - "Name" = "Public Subnet ap-south-1b"
        } -> null
      - vpc_id                          = "vpc-0e4bc3461cb0b71c4" -> null
    }

  # aws_subnet.public_ap-south-1c will be destroyed
  - resource "aws_subnet" "public_ap-south-1c" {
      - arn                             = "arn:aws:ec2:ap-south-1:395162570454:subnet/subnet-070050812054ab808" -> null
      - assign_ipv6_address_on_creation = false -> null
      - availability_zone               = "ap-south-1c" -> null
      - availability_zone_id            = "aps1-az2" -> null
      - cidr_block                      = "10.0.2.0/24" -> null
      - id                              = "subnet-070050812054ab808" -> null
      - map_customer_owned_ip_on_launch = false -> null
      - map_public_ip_on_launch         = false -> null
      - owner_id                        = "395162570454" -> null
      - tags                            = {
          - "Name" = "Public Subnet ap-south-1c"
        } -> null
      - tags_all                        = {
          - "Name" = "Public Subnet ap-south-1c"
        } -> null
      - vpc_id                          = "vpc-0e4bc3461cb0b71c4" -> null
    }

  # aws_vpc.my_vpc will be destroyed
  - resource "aws_vpc" "my_vpc" {
      - arn                              = "arn:aws:ec2:ap-south-1:395162570454:vpc/vpc-0e4bc3461cb0b71c4" -> null
      - assign_generated_ipv6_cidr_block = false -> null
      - cidr_block                       = "10.0.0.0/16" -> null
      - default_network_acl_id           = "acl-048f0d78819d8ec94" -> null
      - default_route_table_id           = "rtb-0c6fa0b0decb06a54" -> null
      - default_security_group_id        = "sg-0d8aa8e87263fae2f" -> null
      - dhcp_options_id                  = "dopt-8fa46de4" -> null
      - enable_dns_hostnames             = true -> null
      - enable_dns_support               = true -> null
      - id                               = "vpc-0e4bc3461cb0b71c4" -> null
      - instance_tenancy                 = "default" -> null
      - main_route_table_id              = "rtb-0c6fa0b0decb06a54" -> null
      - owner_id                         = "395162570454" -> null
      - tags                             = {
          - "Name" = "Demo_VPC"
        } -> null
      - tags_all                         = {
          - "Name" = "Demo_VPC"
        } -> null
    }

Plan: 0 to add, 0 to change, 16 to destroy.

Do you really want to destroy all resources?
  Terraform will destroy all your managed infrastructure, as shown above.
  There is no undo. Only 'yes' will be accepted to confirm.

  Enter a value: yes

aws_route_table_association.my_vpc_ap-south-1a_public: Destroying... [id=rtbassoc-0af25acd6f4bce194]
aws_iam_role_policy.test_policy: Destroying... [id=test_role:test_policy]
aws_instance.role-test: Destroying... [id=i-052732406614602ff]
aws_route_table_association.my_vpc_ap-south-1c_public: Destroying... [id=rtbassoc-07a80d73c023ccfbd]
aws_route_table_association.my_vpc_ap-south-1b_public: Destroying... [id=rtbassoc-0e6408e0f0c889a45]
aws_security_group.allow_http: Destroying... [id=sg-02467971f68b1288f]
aws_instance.Demo_instance: Destroying... [id=i-056e19670b7e443e8]
aws_s3_bucket.S3bucket: Destroying... [id=manoj-s3-with-terraform]
aws_route_table_association.my_vpc_ap-south-1c_public: Destruction complete after 0s
aws_subnet.public_ap-south-1c: Destroying... [id=subnet-070050812054ab808]
aws_route_table_association.my_vpc_ap-south-1b_public: Destruction complete after 0s
aws_subnet.public_ap-south-1b: Destroying... [id=subnet-017c1771130c62093]
aws_route_table_association.my_vpc_ap-south-1a_public: Destruction complete after 0s
aws_subnet.public_ap-south-1a: Destroying... [id=subnet-0aacc7fbbf0211ca1]
aws_route_table.my_vpc_public: Destroying... [id=rtb-0e5cc5557238ea39f]
aws_security_group.allow_http: Destruction complete after 0s
aws_route_table.my_vpc_public: Destruction complete after 1s
aws_internet_gateway.my_igw: Destroying... [id=igw-0b49f7eb97e689247]
aws_subnet.public_ap-south-1b: Destruction complete after 1s
aws_subnet.public_ap-south-1c: Destruction complete after 1s
aws_subnet.public_ap-south-1a: Destruction complete after 1s
aws_s3_bucket.S3bucket: Destruction complete after 1s
aws_iam_role_policy.test_policy: Destruction complete after 1s
aws_instance.role-test: Still destroying... [id=i-052732406614602ff, 10s elapsed]
aws_instance.Demo_instance: Still destroying... [id=i-056e19670b7e443e8, 10s elapsed]
aws_internet_gateway.my_igw: Still destroying... [id=igw-0b49f7eb97e689247, 10s elapsed]
aws_internet_gateway.my_igw: Destruction complete after 10s
aws_vpc.my_vpc: Destroying... [id=vpc-0e4bc3461cb0b71c4]
aws_vpc.my_vpc: Destruction complete after 0s
aws_instance.role-test: Still destroying... [id=i-052732406614602ff, 20s elapsed]
aws_instance.Demo_instance: Still destroying... [id=i-056e19670b7e443e8, 20s elapsed]
aws_instance.role-test: Still destroying... [id=i-052732406614602ff, 30s elapsed]
aws_instance.Demo_instance: Still destroying... [id=i-056e19670b7e443e8, 30s elapsed]
aws_instance.Demo_instance: Destruction complete after 40s
aws_instance.role-test: Destruction complete after 40s
aws_iam_instance_profile.test_profile: Destroying... [id=test_profile]
aws_iam_instance_profile.test_profile: Destruction complete after 1s
aws_iam_role.test_role: Destroying... [id=test_role]
aws_iam_role.test_role: Destruction complete after 3s

Destroy complete! Resources: 16 destroyed.

